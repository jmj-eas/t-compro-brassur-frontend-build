"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4885],{385:(F,T,s)=>{s.d(T,{l:()=>x});var j=s(5312),n=s(4438),c=s(2767),m=s(7343),u=s(177);const o=[[["","left",""]],[["","right",""]],"*"],_=["[left]","[right]","*"];function b(l,h){1&l&&n.nrm(0,"ion-back-button",10)}function S(l,h){1&l&&n.nrm(0,"ion-menu-button",11)}function E(l,h){if(1&l){const f=n.RV6();n.j41(0,"ion-button",12),n.bIt("click",function(){n.eBV(f);const d=n.XpG();return n.Njj(d.close())}),n.nrm(1,"ion-icon",13),n.k0s()}}function z(l,h){if(1&l&&(n.j41(0,"p"),n.EFF(1),n.k0s()),2&l){const f=n.XpG();n.R7$(),n.JRh(f.apiUrl)}}function C(l,h){1&l&&(n.j41(0,"ion-item",14)(1,"ion-label",15),n.EFF(2,"Off-Line"),n.k0s()())}let x=(()=>{class l{constructor(f,p){this.jmjModoConexionService=f,this.modalCtrl=p,this.menuType="back",this.apiUrl="",this.modo="prod"}ngOnInit(){this.apiUrl=j.c.apiUrl,this.modo=this.apiUrl.slice(-4)}close(){this.modalCtrl.dismiss(null)}static{this.\u0275fac=function(p){return new(p||l)(n.rXU(c.B),n.rXU(m.W3))}}static{this.\u0275cmp=n.VBU({type:l,selectors:[["app-header"]],inputs:{title:"title",menuType:"menuType"},ngContentSelectors:_,decls:14,vars:6,consts:[["no-border","","translucent",""],["color","success"],["slot","start"],["defaultHref","/",4,"ngIf"],["menu","appMenu",4,"ngIf"],[3,"click",4,"ngIf"],[1,"titulo"],[4,"ngIf"],["slot","end",1,"right-buttons"],["color","success","lines","none",4,"ngIf"],["defaultHref","/"],["menu","appMenu"],[3,"click"],["name","close","slot","icon-only"],["color","success","lines","none"],["color","danger"]],template:function(p,d){1&p&&(n.NAR(o),n.j41(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),n.DNE(3,b,1,0,"ion-back-button",3)(4,S,1,0,"ion-menu-button",4)(5,E,2,0,"ion-button",5),n.SdG(6),n.k0s(),n.j41(7,"ion-title",6),n.EFF(8),n.k0s(),n.DNE(9,z,2,1,"p",7),n.j41(10,"ion-buttons",8),n.DNE(11,C,3,0,"ion-item",9),n.SdG(12,1),n.k0s()(),n.SdG(13,2),n.k0s()),2&p&&(n.R7$(3),n.Y8G("ngIf","back"===d.menuType),n.R7$(),n.Y8G("ngIf","menu"===d.menuType),n.R7$(),n.Y8G("ngIf","modal"===d.menuType),n.R7$(3),n.JRh(d.title),n.R7$(),n.Y8G("ngIf","test"===d.modo),n.R7$(2),n.Y8G("ngIf",d.jmjModoConexionService.getModoOffLine()))},dependencies:[u.bT,m.Jm,m.QW,m.eU,m.iq,m.uz,m.he,m.MC,m.BC,m.ai,m.el],styles:[".titulo[_ngcontent-%COMP%]{color:#fff}ion-icon[_ngcontent-%COMP%]{color:#fff}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%], .ion-color[_ngcontent-%COMP%]   .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%], .sc-ion-buttons-md-h.ion-color.sc-ion-buttons-md-s[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%], .ion-color[_ngcontent-%COMP%]   .sc-ion-buttons-md-h.sc-ion-buttons-md-s[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{color:#fff}"]})}}return l})()},4885:(F,T,s)=>{s.r(T),s.d(T,{JmjTransferenciaValoresPageModule:()=>J});var j=s(177),n=s(9417),c=s(7343),m=s(1050),u=s(467),o=s(4438),_=s(2130),b=s(2464),S=s(1527),E=s(5032),z=s(3943),C=s(2767),x=s(2226),l=s(5161),h=s(385);function f(r,v){if(1&r&&(o.j41(0,"ion-row",29)(1,"ion-col",30),o.EFF(2),o.k0s(),o.j41(3,"ion-col",31),o.EFF(4),o.nI1(5,"number"),o.k0s()()),2&r){const e=v.$implicit;o.R7$(2),o.JRh(e.desTipoValor),o.R7$(2),o.JRh(o.i5U(5,2,e.monto,"1.0-0"))}}function p(r,v){if(1&r){const e=o.RV6();o.j41(0,"ion-row",20)(1,"ion-col",21)(2,"ion-checkbox",22),o.mxI("ngModelChange",function(a){const t=o.eBV(e).$implicit;return o.DH7(t.seleccionado,a)||(t.seleccionado=a),o.Njj(a)}),o.bIt("click",function(){const a=o.eBV(e).$implicit,t=o.XpG(2);return o.Njj(t.seleccion(a.id))}),o.k0s()(),o.j41(3,"ion-col",23),o.EFF(4),o.k0s(),o.j41(5,"ion-col",24),o.EFF(6),o.k0s(),o.j41(7,"ion-col",25),o.EFF(8),o.k0s(),o.j41(9,"ion-col",26),o.EFF(10),o.nI1(11,"number"),o.k0s(),o.j41(12,"ion-grid"),o.DNE(13,f,6,5,"ion-row",27),o.j41(14,"ion-row")(15,"ion-col",28),o.EFF(16),o.k0s()(),o.j41(17,"ion-row")(18,"ion-col",28),o.EFF(19),o.k0s()()()()}if(2&r){const e=v.$implicit;o.R7$(2),o.R50("ngModel",e.seleccionado),o.R7$(2),o.JRh(e.id),o.R7$(2),o.JRh(e.nombreTipoEnvio),o.R7$(2),o.JRh(e.remitente),o.R7$(2),o.JRh(o.i5U(11,8,e.montoTotal,"1.0-0")),o.R7$(3),o.Y8G("ngForOf",e.valores),o.R7$(3),o.SpI("Talonario Rec: ",e.talonario.nroFomatoSet,""),o.R7$(3),o.SpI("Talonario Rec Pres.: ",e.talonario.nroPrestamoFomatoSet,"")}}function d(r,v){if(1&r&&(o.j41(0,"div")(1,"ion-item",17)(2,"ion-label",18),o.EFF(3,"TOTAL VALORES : "),o.k0s(),o.j41(4,"p",19),o.EFF(5),o.nI1(6,"number"),o.k0s()(),o.j41(7,"ion-item")(8,"ion-text",32),o.EFF(9,"Hay diferencias entre las cabeceras y los detalles"),o.k0s()()()),2&r){const e=o.XpG(2);o.R7$(5),o.JRh(o.i5U(6,1,e.importeRecibidoDet,"1.0-0"))}}function O(r,v){if(1&r&&(o.j41(0,"ion-grid")(1,"ion-row",7)(2,"ion-col",8)(3,"ion-list")(4,"ion-grid")(5,"ion-row",9)(6,"ion-item-divider",10)(7,"ion-col",11),o.EFF(8,"Id"),o.k0s(),o.j41(9,"ion-col",12),o.EFF(10,"Tipo Envio"),o.k0s(),o.j41(11,"ion-col",12),o.EFF(12,"Remit"),o.k0s(),o.j41(13,"ion-col",13),o.EFF(14,"Importe"),o.k0s()()(),o.DNE(15,p,20,11,"ion-row",14),o.k0s(),o.j41(16,"ion-row",15)(17,"ion-col",16)(18,"ion-item",17)(19,"ion-label",18),o.EFF(20,"TOTAL GENERAL : "),o.k0s(),o.j41(21,"p",19),o.EFF(22),o.nI1(23,"number"),o.k0s()(),o.DNE(24,d,10,4,"div",3),o.k0s()()()()()()),2&r){const e=o.XpG();o.R7$(15),o.Y8G("ngForOf",e.iJmjTransferenciaValores),o.R7$(7),o.JRh(o.i5U(23,3,e.importeRecibidoCab,"1.0-0")),o.R7$(2),o.Y8G("ngIf",0!==e.importeTotalDif)}}let R=(()=>{class r{constructor(e,i,a,t,g,I,k,D,y){if(this.apiSvc=e,this.authSvc=i,this.route=a,this.alertSvc=t,this.navCtrl=g,this.jmjStorageService=I,this.jmjModoConexionService=k,this.jmjTomarDatosGlobales=D,this.loaderSvc=y,this.tipo=this.route.snapshot.paramMap.get("tipo"),this.jmjModoConexionService.getModoOffLine())return this.alertSvc.success("Para enviar o recibir valores debe tener conexi\xf3n"),void this.navCtrl.navigateBack("/jmj-home")}ngOnInit(){if(this.jmjModoConexionService.getModoOffLine())return this.alertSvc.success("Para enviar o recibir valores debe tener conexi\xf3n"),void this.navCtrl.navigateBack("/jmj-home");this.iJmjTransferenciaValores=[],"recibir"===this.tipo?(this.finalizarLabel="Recibir",this.titulo="Valores a recibir",this.recuperarDatos()):"enviar"===this.tipo&&(this.finalizarLabel="Enviar",this.titulo="Valores a enviar",this.asignarDatos())}doRefresh(e){var i=this;return(0,u.A)(function*(){if(i.jmjModoConexionService.getModoOffLine())return e.target.complete(),i.alertSvc.success("Para enviar o recibir valores debe tener conexi\xf3n"),void i.navCtrl.navigateBack("/jmj-home");yield i.recuperarDatos(),e.target.complete(),setTimeout(()=>{e.target.complete()},2e3)})()}recuperarDatos(){return(0,u.A)(function*(){})()}asignarDatos(){var e=this;return(0,u.A)(function*(){e.talonarioRecibo=JSON.parse(yield e.jmjStorageService.getData(e.jmjStorageService.TALONARIO_RECIBO)),e.iJmjTransferenciaValor={remitente:e.authSvc.getUserInfo().usuario,id:1,montoTotal:e.jmjTomarDatosGlobales.getBilletera()?e.jmjTomarDatosGlobales.getBilletera().saldo:0,nombreTipoEnvio:"Env\xedo de Valores",seleccionado:!1,tipoEnvio:"1",valores:[{id:1,tipoValor:"E",monto:e.jmjTomarDatosGlobales.getBilletera()?e.jmjTomarDatosGlobales.getBilletera().saldo:0,desTipoValor:e.getDescripcionTipoValor("E")}],talonario:e.talonarioRecibo},e.iJmjTransferenciaValores.push(e.iJmjTransferenciaValor),e.validaciones()})()}getDescripcionTipoValor(e){return"E"===e?"Efectivo":"T"===e?"Transferencia":"C"===e?"Cheque":"Desconocido"}validaciones(){this.importeRecibidoCab=this.iJmjTransferenciaValores.reduce((e,i)=>e+i.montoTotal,0),this.importeRecibidoDet=this.iJmjTransferenciaValores.map(e=>e.valores.reduce((i,a)=>i+a.monto,0)).reduce((e,i)=>e+i,0),this.importeTotalDif=this.importeRecibidoCab-this.importeRecibidoDet}seleccion(e){this.idSeleccionado=e,this.iJmjTransferenciaValores.forEach(function(i,a){i.id!==e&&(i.seleccionado=!1)})}autorizarTransaccion(){var e=this;return(0,u.A)(function*(){e.validaciones(),yield e.loaderSvc.show("Cargando"),"recibir"===e.tipo?e.apiSvc.post("/valores/recepcionEnvio/"+e.idSeleccionado,null).subscribe(function(){var i=(0,u.A)(function*(a){e.loaderSvc.stop(),"1"===e.iJmjTransferenciaValores[0].tipoEnvio&&e.jmjStorageService.saveData(e.jmjStorageService.TALONARIO_RECIBO,JSON.stringify(e.iJmjTransferenciaValores[0].talonario)),e.alertSvc.success("Transferencia recibida!"),e.navCtrl.navigateBack("/jmj-home")});return function(a){return i.apply(this,arguments)}}(),i=>{e.loaderSvc.stop(),e.alertSvc.error("Error al procesar transferencia:"+JSON.stringify(i.error))}):"enviar"===e.tipo&&(e.iJmjTransferenciaValor=e.iJmjTransferenciaValores[0],e.iJmjTransferenciaValor=Object.assign(e.iJmjTransferenciaValor,{comprador:e.iJmjTransferenciaValor.remitente}),e.apiSvc.post("/valores/rendicion",e.iJmjTransferenciaValor).subscribe(function(){var i=(0,u.A)(function*(a){e.loaderSvc.stop(),e.alertSvc.success("Transferencia enviada!"),e.navCtrl.navigateBack("/jmj-home")});return function(a){return i.apply(this,arguments)}}(),i=>{e.loaderSvc.stop(),console.log(i),e.alertSvc.error("Error al procesar transferencia:"+JSON.stringify(i.error))}))})()}close(){this.navCtrl.navigateBack("/jmj-home")}static{this.\u0275fac=function(i){return new(i||r)(o.rXU(_.G),o.rXU(b.u),o.rXU(m.nX),o.rXU(S.u),o.rXU(E.q9),o.rXU(z.y),o.rXU(C.B),o.rXU(x.C),o.rXU(l.Z))}}static{this.\u0275cmp=o.VBU({type:r,selectors:[["app-jmj-transferencia-valores"]],decls:10,vars:4,consts:[[3,"title"],["slot","fixed",3,"ionRefresh"],["pullingIcon","chevron-down-circle-outline","pullingText","Pull to refresh","refreshingSpinner","circles","refreshingText","Refrescando..."],[4,"ngIf"],[1,"animated","fadeIn","fast"],["expand","full","color","medium","size","large",1,"ion-no-padding","ion-no-margin",3,"click","disabled"],["expand","full","color","danger","size","large",1,"ion-no-padding","ion-no-margin",3,"click"],[1,"ion-justify-content-center"],["size","12"],[1,"item-divider"],["size","12",1,"item-divider"],["size-xs","1.1","size-sm","1","size-md","1","size-lg","1","size-xl","1",1,"ion-text-start","ion-hide-sm-down","ion-no-padding","ion-no-margin"],["size-xs","4","size-sm","3","size-md","0.5","size-lg","1","size-xl","1",1,"ion-text-start"],["size-xs","3.5","size-sm","3.2","size-md","2.5","size-lg","1","size-xl","1",1,"ion-text-end"],["class","datarow-cab",4,"ngFor","ngForOf"],[1,"ion-justify-content-center","ion-no-padding","ion-no-margin"],["size","12",1,"ion-text-end"],[1,"ion-text-end","ion-no-padding","ion-no-margin"],[1,"ion-text-center","ion-padding-end"],[1,"total"],[1,"datarow-cab"],["size-xs","0.5","size-sm","0.1","size-md","0.5","size-lg","0.1","size-xl","0.1",1,"ion-text-start","seleccionar","ion-padding-end"],[1,"ion-text-start","seleccionar",3,"ngModelChange","click","ngModel"],["size-xs","1.2","size-sm","1","size-md","0.5","size-lg","1","size-xl","1",1,"ion-text-start","ion-hide-sm-down","idenvio"],["size-xs","3","size-sm","3","size-md","3","size-lg","1","size-xl","1",1,"ion-text-start","tipoenvio"],["size-xs","3.5","size-sm","3.5","size-md","3","size-lg","1","size-xl","1",1,"ion-text-start"],["size-xs","3.5","size-sm","3","size-md","3","size-lg","1","size-xl","1",1,"ion-text-end"],["class","datarow-det ion-justify-content-end ion-padding-end",4,"ngFor","ngForOf"],["size-xs","11","size-sm","11","size-md","11","size-lg","11","size-xl","11",1,"ion-text-end"],[1,"datarow-det","ion-justify-content-end","ion-padding-end"],["size-xs","3","size-sm","3","size-md","10","size-lg","6","size-xl","6",1,"ion-text-end"],["size-xs","4","size-sm","3","size-md","10","size-lg","6","size-xl","6",1,"ion-text-end"],["color","danger"]],template:function(i,a){1&i&&(o.nrm(0,"app-header",0),o.j41(1,"ion-content")(2,"ion-refresher",1),o.bIt("ionRefresh",function(g){return a.doRefresh(g)}),o.nrm(3,"ion-refresher-content",2),o.k0s(),o.DNE(4,O,25,6,"ion-grid",3),o.k0s(),o.j41(5,"ion-footer",4)(6,"ion-button",5),o.bIt("click",function(){return a.autorizarTransaccion()}),o.EFF(7),o.k0s(),o.j41(8,"ion-button",6),o.bIt("click",function(){return a.close()}),o.EFF(9,"Cancelar "),o.k0s()()),2&i&&(o.Y8G("title",a.titulo),o.R7$(4),o.Y8G("ngIf",a.iJmjTransferenciaValores.length>0),o.R7$(2),o.Y8G("disabled",0!==a.importeTotalDif||!a.idSeleccionado),o.R7$(),o.SpI("",a.finalizarLabel," "))},dependencies:[j.Sq,j.bT,n.BC,n.vS,c.Jm,c.eY,c.hU,c.W9,c.M0,c.lO,c.uz,c.Dg,c.he,c.nf,c.To,c.Ki,c.ln,c.IO,c.hB,h.l,j.QX],styles:[".item-divider[_ngcontent-%COMP%]{font-size:.8rem}.datarow-cab[_ngcontent-%COMP%]{font-size:.8rem;background-color:#f5f5f5;margin-bottom:10px}.datarow-det[_ngcontent-%COMP%]{font-size:.8rem}.seleccionar[_ngcontent-%COMP%]{font-size:1px}.tipoenvio[_ngcontent-%COMP%], .idenvio[_ngcontent-%COMP%]{margin-left:10px}"]})}}return r})();const V=[{path:"",component:R},{path:":tipo",component:R}];let M=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=o.$C({type:r})}static{this.\u0275inj=o.G2t({imports:[m.iI.forChild(V),m.iI]})}}return r})();var P=s(9244);let J=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=o.$C({type:r})}static{this.\u0275inj=o.G2t({imports:[j.MD,n.YN,c.bv,M,P.Q]})}}return r})()}}]);