"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4992],{385:(A,R,i)=>{i.d(R,{l:()=>M});var b=i(5312),t=i(4438),a=i(2767),s=i(7343),g=i(177);const T=[[["","left",""]],[["","right",""]],"*"],e=["[left]","[right]","*"];function C(l,S){1&l&&t.nrm(0,"ion-back-button",10)}function E(l,S){1&l&&t.nrm(0,"ion-menu-button",11)}function P(l,S){if(1&l){const d=t.RV6();t.j41(0,"ion-button",12),t.bIt("click",function(){t.eBV(d);const u=t.XpG();return t.Njj(u.close())}),t.nrm(1,"ion-icon",13),t.k0s()}}function I(l,S){if(1&l&&(t.j41(0,"p"),t.EFF(1),t.k0s()),2&l){const d=t.XpG();t.R7$(),t.JRh(d.apiUrl)}}function _(l,S){1&l&&(t.j41(0,"ion-item",14)(1,"ion-label",15),t.EFF(2,"Off-Line"),t.k0s()())}let M=(()=>{class l{constructor(d,j){this.jmjModoConexionService=d,this.modalCtrl=j,this.menuType="back",this.apiUrl="",this.modo="prod"}ngOnInit(){this.apiUrl=b.c.apiUrl,this.modo=this.apiUrl.slice(-4)}close(){this.modalCtrl.dismiss(null)}static{this.\u0275fac=function(j){return new(j||l)(t.rXU(a.B),t.rXU(s.W3))}}static{this.\u0275cmp=t.VBU({type:l,selectors:[["app-header"]],inputs:{title:"title",menuType:"menuType"},ngContentSelectors:e,decls:14,vars:6,consts:[["no-border","","translucent",""],["color","success"],["slot","start"],["defaultHref","/",4,"ngIf"],["menu","appMenu",4,"ngIf"],[3,"click",4,"ngIf"],[1,"titulo"],[4,"ngIf"],["slot","end",1,"right-buttons"],["color","success","lines","none",4,"ngIf"],["defaultHref","/"],["menu","appMenu"],[3,"click"],["name","close","slot","icon-only"],["color","success","lines","none"],["color","danger"]],template:function(j,u){1&j&&(t.NAR(T),t.j41(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),t.DNE(3,C,1,0,"ion-back-button",3)(4,E,1,0,"ion-menu-button",4)(5,P,2,0,"ion-button",5),t.SdG(6),t.k0s(),t.j41(7,"ion-title",6),t.EFF(8),t.k0s(),t.DNE(9,I,2,1,"p",7),t.j41(10,"ion-buttons",8),t.DNE(11,_,3,0,"ion-item",9),t.SdG(12,1),t.k0s()(),t.SdG(13,2),t.k0s()),2&j&&(t.R7$(3),t.Y8G("ngIf","back"===u.menuType),t.R7$(),t.Y8G("ngIf","menu"===u.menuType),t.R7$(),t.Y8G("ngIf","modal"===u.menuType),t.R7$(3),t.JRh(u.title),t.R7$(),t.Y8G("ngIf","test"===u.modo),t.R7$(2),t.Y8G("ngIf",u.jmjModoConexionService.getModoOffLine()))},dependencies:[g.bT,s.Jm,s.QW,s.eU,s.iq,s.uz,s.he,s.MC,s.BC,s.ai,s.el],styles:[".titulo[_ngcontent-%COMP%]{color:#fff}ion-icon[_ngcontent-%COMP%]{color:#fff}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%], .ion-color[_ngcontent-%COMP%]   .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%], .sc-ion-buttons-md-h.ion-color.sc-ion-buttons-md-s[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%], .ion-color[_ngcontent-%COMP%]   .sc-ion-buttons-md-h.sc-ion-buttons-md-s[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{color:#fff}"]})}}return l})()},4992:(A,R,i)=>{i.r(R),i.d(R,{JmjHomePageModule:()=>N});var b=i(177),t=i(9417),a=i(7343),s=i(1050),g=i(467),T=i(5312),e=i(4438),C=i(2767),E=i(2130),P=i(5161),I=i(5032),_=i(1527),M=i(2226),l=i(3943),S=i(2464),d=i(385);function j(r,F){1&r&&e.nrm(0,"ion-spinner",18)}function u(r,F){if(1&r&&(e.j41(0,"div")(1,"ion-row",7)(2,"ion-text")(3,"p",7),e.EFF(4),e.k0s(),e.j41(5,"p",7),e.EFF(6),e.k0s()()()()),2&r){const n=e.XpG();e.R7$(4),e.SpI("Talonario Acopio: ",n.nroFormatoSet,""),e.R7$(2),e.SpI("Talonario Dinero: ",n.nroPrestamoFomatoSet,"")}}function y(r,F){if(1&r&&(e.j41(0,"ion-item")(1,"ion-label",11)(2,"ion-text")(3,"ion-label",19),e.EFF(4,"Confirmacion Pend.:"),e.k0s()(),e.j41(5,"ion-text",20),e.EFF(6),e.nI1(7,"currency"),e.k0s()()()),2&r){const n=e.XpG();e.R7$(6),e.SpI("GS ",e.ii3(7,1,n.rendicionAConfirmar,"PYG","","1.0-0"),"")}}const L=[{path:"",component:(()=>{class r{constructor(n,o,c,f,p,v,m,h,O,G,J){this.jmjModoConexionService=n,this.apiSvc=o,this.loaderSvc=c,this.platform=f,this.alerSvc=p,this.route=v,this.toastController=m,this.router=h,this.jmjTomarDatosGlobales=O,this.jmjStorageService=G,this.authSvc=J,this.idUsuario="",this.subscription=this.platform.backButton.subscribeWithPriority(9999,B=>{this.presentToast("No puede utilizar el boton de retroceso en esta vista")})}ngOnInit(){this.desEntidad=T.c.desentidad}ngOnDestroy(){this.subscription.unsubscribe()}ionViewWillEnter(){this.titulo=this.authSvc.getUserInfo().nombre,this.expira_en="Tu conexi\xf3n termina en "+this.authSvc.getUserInfo().expira_en_ms/1e3/60/60+" Hs",this.recuperarDatos()}presentToast(n){var o=this;return(0,g.A)(function*(){(yield o.toastController.create({message:n,duration:2e3})).present()})()}doRefresh(n){var o=this;return(0,g.A)(function*(){yield o.recuperarDatos(),n.target.complete(),setTimeout(()=>{n.target.complete()},2e3)})()}recuperarDatos(){var n=this;return(0,g.A)(function*(){let o=JSON.parse(yield n.jmjStorageService.getData(n.jmjStorageService.OFFLINE));if(n.transaccionesOffLine={},n.desembolsosOffLine={},n.transaccionesOffLine=JSON.parse(yield n.jmjStorageService.getData(n.jmjStorageService.COMPRAS)),n.desembolsosOffLine=JSON.parse(yield n.jmjStorageService.getData(n.jmjStorageService.PRESTAMOS)),n.billeteraGuardada=JSON.parse(yield n.jmjStorageService.getData(n.jmjStorageService.BILLETERA)),n.billeteraOnLine=JSON.parse(yield n.jmjStorageService.getData(n.jmjStorageService.BILLETERA_ONLINE)),n.jmjTalonarioRecibo="undefined"===(yield n.jmjStorageService.getData(n.jmjStorageService.TALONARIO_RECIBO))?void 0:JSON.parse(yield n.jmjStorageService.getData(n.jmjStorageService.TALONARIO_RECIBO)),n.transaccionesOffLine&&n.transaccionesOffLine.length>0&&(o=!0),o){let c=JSON.parse(yield n.jmjStorageService.getData(n.jmjStorageService.COMPRAS)),f=0;c&&c.length>0&&(f=c.reduce((h,O)=>Number(h)+(Number(O.precioUnitario)||0),0));let p=JSON.parse(yield n.jmjStorageService.getData(n.jmjStorageService.PRESTAMOS)),v=0;p&&p.length>0&&(v=p.reduce((h,O)=>Number(h)+(Number(O.monto)||0),0)),n.jmjModoConexionService.setModoOffLine(o);let m=JSON.parse(yield n.jmjStorageService.getData(n.jmjStorageService.BILLETERA));if(m.recibidos=m.ingresos,m.realizados=n.billeteraOnLine&&n.billeteraOnLine.egresos>0?n.billeteraOnLine.egresos+f+v:f+v,m.devoluciones=m.devoluciones,m.arendir=m.recibidos-m.realizados+m.devoluciones,m.rendicionAConfirmar=m.saldoPendiente,yield n.setDatosBilletera(m),n.cerrar)return void n.authSvc.logout()}})()}setDatosBilletera(n){var o=this;return(0,g.A)(function*(){if(!o.jmjModoConexionService.getModoOffLine()&&o.jmjTalonarioRecibo&&n.talonario){if(o.jmjTalonarioRecibo.puntoExpedicion!==n.talonario.puntoExpedicion&&(o.billeteraGuardada.ingresos>0||o.billeteraGuardada.saldo>0||o.billeteraGuardada.saldoPendiente>0))return o.alerSvc.error("No puede utilizar la aplicaci\xf3n porque el usuario con el punto de expedici\xf3n "+o.jmjTalonarioRecibo.puntoExpedicion+" a\xfan no rindi\xf3 su caja o el proceso de recepci\xf3n est\xe1 pendiente"),void(o.cerrar=!0);o.cerrar=!1}o.valores_recibidos=parseFloat(n.recibidos)||0,o.pagos_realizados=parseFloat(n.realizados)||0,o.cobros_prestamos=parseFloat(n.devoluciones)||0,o.valores_a_rendir=parseFloat(n.arendir)||0,o.rendicionAConfirmar=parseFloat(n.rendicionAConfirmar)||0,o.iJmjBilletera={ingresos:o.valores_recibidos,egresos:o.pagos_realizados,devoluciones:o.cobros_prestamos,saldo:o.valores_a_rendir,saldoPendiente:o.rendicionAConfirmar},o.jmjTalonarioRecibo="undefined"===(yield o.jmjStorageService.getData(o.jmjStorageService.TALONARIO_RECIBO))?void 0:JSON.parse(yield o.jmjStorageService.getData(o.jmjStorageService.TALONARIO_RECIBO)),o.jmjTalonarioRecibo||o.jmjModoConexionService.getModoOffLine()||(o.alerSvc.error("No se encontr\xf3 datos de talonarios de recibo y se actualiz\xf3 con los nros de la primera recepcion de dinero"),o.jmjTalonarioRecibo=n.talonario),o.jmjModoConexionService.getModoOffLine()?o.iJmjTalonarioRecibo={sucursal:o.jmjTalonarioRecibo.sucursal,puntoExpedicion:o.jmjTalonarioRecibo.puntoExpedicion,numeroActual:o.jmjTalonarioRecibo.numeroActual,numeroPrestamoActual:o.jmjTalonarioRecibo.numeroPrestamoActual,identificadorLote:o.jmjTalonarioRecibo.identificadorLote,nroFomatoSet:o.jmjTalonarioRecibo.sucursal.toString().padStart(3,"0")+"-"+o.jmjTalonarioRecibo.puntoExpedicion.toString().padStart(3,"0")+"-"+o.jmjTalonarioRecibo.numeroActual.toString().padStart(7,"0"),nroPrestamoFomatoSet:o.jmjTalonarioRecibo.sucursal.toString().padStart(3,"0")+"-"+o.jmjTalonarioRecibo.puntoExpedicion.toString().padStart(3,"0")+"-"+o.jmjTalonarioRecibo.numeroPrestamoActual.toString().padStart(7,"0")}:o.jmjTalonarioRecibo&&n.talonario&&(o.jmjTalonarioRecibo.puntoExpedicion!==n.talonario.puntoExpedicion?o.jmjTalonarioRecibo=n.talonario:o.iJmjTalonarioRecibo={sucursal:n.talonario.sucursal,puntoExpedicion:n.talonario.puntoExpedicion,numeroActual:n.talonario.numeroActual,numeroPrestamoActual:n.talonario.numeroPrestamoActual,identificadorLote:n.talonario.identificadorLote,nroFomatoSet:n.talonario.sucursal.toString().padStart(3,"0")+"-"+n.talonario.puntoExpedicion.toString().padStart(3,"0")+"-"+n.talonario.numeroActual.toString().padStart(7,"0"),nroPrestamoFomatoSet:n.talonario.sucursal.toString().padStart(3,"0")+"-"+n.talonario.puntoExpedicion.toString().padStart(3,"0")+"-"+n.talonario.numeroPrestamoActual.toString().padStart(7,"0")}),o.jmjStorageService.saveData(o.jmjStorageService.TALONARIO_RECIBO,JSON.stringify(o.iJmjTalonarioRecibo)),o.nroFormatoSet=o.iJmjTalonarioRecibo?o.iJmjTalonarioRecibo.nroFomatoSet:null,o.nroPrestamoFomatoSet=o.iJmjTalonarioRecibo?o.iJmjTalonarioRecibo.nroPrestamoFomatoSet:null,o.jmjTomarDatosGlobales.setBilletera(o.iJmjBilletera)})()}static{this.\u0275fac=function(o){return new(o||r)(e.rXU(C.B),e.rXU(E.G),e.rXU(P.Z),e.rXU(I.OD),e.rXU(_.u),e.rXU(s.nX),e.rXU(a.K_),e.rXU(s.Ix),e.rXU(M.C),e.rXU(l.y),e.rXU(S.u))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-jmj-home"]],decls:39,vars:23,consts:[[3,"title","menuType"],[1,"ion-padding"],["slot","fixed",3,"ionRefresh"],["pullingIcon","chevron-down-circle-outline","pullingText","Pull to refresh","refreshingSpinner","circles","refreshingText","Refrescando..."],[1,"ion-text-center"],["name","dots",4,"ngIf"],[4,"ngIf"],[1,"ion-justify-content-center"],["sizeLg","5","sizeMd","6","sizeXl","4",1,"ion-align-self-center"],[1,"billetera"],["routerLink","/jmj-transferencia-valores/recibir"],[1,"ion-text-wrap"],[1,"concepto"],[1,"valor"],["name","arrow-forward-outline","slot","end"],["routerLink","/jmj-compra-hist/COMPRAS"],["name","arrow-forward-outline","slot","end",1,"iconos"],["routerLink","/jmj-transferencia-valores/enviar"],["name","dots"],["color","danger",1,"concepto"],["color","danger"]],template:function(o,c){1&o&&(e.nrm(0,"app-header",0),e.j41(1,"ion-content",1)(2,"ion-refresher",2),e.bIt("ionRefresh",function(p){return c.doRefresh(p)}),e.nrm(3,"ion-refresher-content",3),e.k0s(),e.j41(4,"div",4),e.DNE(5,j,1,0,"ion-spinner",5),e.k0s(),e.j41(6,"ion-grid"),e.DNE(7,u,7,2,"div",6),e.j41(8,"ion-row",7)(9,"ion-col",8)(10,"ion-list",9)(11,"ion-item",10)(12,"ion-label",11)(13,"ion-text")(14,"ion-label",12),e.EFF(15,"Valores Recibidos"),e.k0s()(),e.j41(16,"ion-text",13),e.EFF(17),e.nI1(18,"currency"),e.k0s()(),e.nrm(19,"ion-icon",14),e.k0s(),e.j41(20,"ion-item",15)(21,"ion-label",11)(22,"ion-text")(23,"ion-label",12),e.EFF(24,"Pagos Realizados"),e.k0s()(),e.j41(25,"ion-text",13),e.EFF(26),e.nI1(27,"currency"),e.k0s()(),e.nrm(28,"ion-icon",16),e.k0s(),e.j41(29,"ion-item",17)(30,"ion-label",11)(31,"ion-text")(32,"ion-label",12),e.EFF(33,"Valores a Rendir"),e.k0s()(),e.j41(34,"ion-text",13),e.EFF(35),e.nI1(36,"currency"),e.k0s()(),e.nrm(37,"ion-icon",14),e.k0s(),e.DNE(38,y,8,6,"ion-item",6),e.k0s()()()()()),2&o&&(e.FS9("title",c.titulo),e.Y8G("menuType","menu"),e.R7$(5),e.Y8G("ngIf",c.loading),e.R7$(2),e.Y8G("ngIf",c.nroFormatoSet),e.R7$(10),e.SpI("GS ",e.ii3(18,8,c.valores_recibidos,"PYG","","1.0-0"),""),e.R7$(9),e.SpI("GS ",e.ii3(27,13,c.pagos_realizados,"PYG","","1.0-0"),""),e.R7$(9),e.SpI("GS ",e.ii3(36,18,c.valores_a_rendir,"PYG","","1.0-0"),""),e.R7$(3),e.Y8G("ngIf",c.rendicionAConfirmar&&0!==c.rendicionAConfirmar))},dependencies:[b.bT,a.hU,a.W9,a.lO,a.iq,a.uz,a.he,a.nf,a.To,a.Ki,a.ln,a.w2,a.IO,a.N7,s.Wk,d.l,b.oe],styles:[".billetera[_ngcontent-%COMP%]{font-family:Verdana,Geneva,Tahoma,sans-serif}.concepto[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.valor[_ngcontent-%COMP%]{color:gray}.conexion[_ngcontent-%COMP%]{font-size:10px}"]})}}return r})()}];let x=(()=>{class r{static{this.\u0275fac=function(o){return new(o||r)}}static{this.\u0275mod=e.$C({type:r})}static{this.\u0275inj=e.G2t({imports:[s.iI.forChild(L),s.iI]})}}return r})();var D=i(9244);let N=(()=>{class r{static{this.\u0275fac=function(o){return new(o||r)}}static{this.\u0275mod=e.$C({type:r})}static{this.\u0275inj=e.G2t({imports:[b.MD,t.YN,a.bv,x,D.Q]})}}return r})()}}]);