"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8652],{385:(I,v,r)=>{r.d(v,{l:()=>F});var j=r(5312),e=r(4438),d=r(2767),u=r(7343),f=r(177);const h=[[["","left",""]],[["","right",""]],"*"],C=["[left]","[right]","*"];function o(c,M){1&c&&e.nrm(0,"ion-back-button",10)}function P(c,M){1&c&&e.nrm(0,"ion-menu-button",11)}function U(c,M){if(1&c){const p=e.RV6();e.j41(0,"ion-button",12),e.bIt("click",function(){e.eBV(p);const m=e.XpG();return e.Njj(m.close())}),e.nrm(1,"ion-icon",13),e.k0s()}}function R(c,M){if(1&c&&(e.j41(0,"p"),e.EFF(1),e.k0s()),2&c){const p=e.XpG();e.R7$(),e.JRh(p.apiUrl)}}function E(c,M){1&c&&(e.j41(0,"ion-item",14)(1,"ion-label",15),e.EFF(2,"Off-Line"),e.k0s()())}let F=(()=>{class c{constructor(p,g){this.jmjModoConexionService=p,this.modalCtrl=g,this.menuType="back",this.apiUrl="",this.modo="prod"}ngOnInit(){this.apiUrl=j.c.apiUrl,this.modo=this.apiUrl.slice(-4)}close(){this.modalCtrl.dismiss(null)}static{this.\u0275fac=function(g){return new(g||c)(e.rXU(d.B),e.rXU(u.W3))}}static{this.\u0275cmp=e.VBU({type:c,selectors:[["app-header"]],inputs:{title:"title",menuType:"menuType"},ngContentSelectors:C,decls:14,vars:6,consts:[["no-border","","translucent",""],["color","success"],["slot","start"],["defaultHref","/",4,"ngIf"],["menu","appMenu",4,"ngIf"],[3,"click",4,"ngIf"],[1,"titulo"],[4,"ngIf"],["slot","end",1,"right-buttons"],["color","success","lines","none",4,"ngIf"],["defaultHref","/"],["menu","appMenu"],[3,"click"],["name","close","slot","icon-only"],["color","success","lines","none"],["color","danger"]],template:function(g,m){1&g&&(e.NAR(h),e.j41(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),e.DNE(3,o,1,0,"ion-back-button",3)(4,P,1,0,"ion-menu-button",4)(5,U,2,0,"ion-button",5),e.SdG(6),e.k0s(),e.j41(7,"ion-title",6),e.EFF(8),e.k0s(),e.DNE(9,R,2,1,"p",7),e.j41(10,"ion-buttons",8),e.DNE(11,E,3,0,"ion-item",9),e.SdG(12,1),e.k0s()(),e.SdG(13,2),e.k0s()),2&g&&(e.R7$(3),e.Y8G("ngIf","back"===m.menuType),e.R7$(),e.Y8G("ngIf","menu"===m.menuType),e.R7$(),e.Y8G("ngIf","modal"===m.menuType),e.R7$(3),e.JRh(m.title),e.R7$(),e.Y8G("ngIf","test"===m.modo),e.R7$(2),e.Y8G("ngIf",m.jmjModoConexionService.getModoOffLine()))},dependencies:[f.bT,u.Jm,u.QW,u.eU,u.iq,u.uz,u.he,u.MC,u.BC,u.ai,u.el],styles:[".titulo[_ngcontent-%COMP%]{color:#fff}ion-icon[_ngcontent-%COMP%]{color:#fff}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%], .ion-color[_ngcontent-%COMP%]   .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%], .sc-ion-buttons-md-h.ion-color.sc-ion-buttons-md-s[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%], .ion-color[_ngcontent-%COMP%]   .sc-ion-buttons-md-h.sc-ion-buttons-md-s[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{color:#fff}"]})}}return c})()},8652:(I,v,r)=>{r.r(v),r.d(v,{UsuarioentidadcrudPageModule:()=>G});var j=r(177),e=r(9417),d=r(7343),u=r(9244),f=r(1050),h=r(467),C=r(4709),o=r(4438),P=r(5032),U=r(5161),R=r(1527),E=r(2130),F=r(2464),c=r(385);function M(s,b){if(1&s){const i=o.RV6();o.j41(0,"ion-item",15)(1,"ion-label",21),o.EFF(2,"Direcci\xf3n"),o.k0s(),o.j41(3,"ion-input",22),o.mxI("ngModelChange",function(n){o.eBV(i);const a=o.XpG();return o.DH7(a.datos.direccion,n)||(a.datos.direccion=n),o.Njj(n)}),o.k0s()()}if(2&s){const i=o.XpG();o.R7$(3),o.Y8G("disabled",!0),o.R50("ngModel",i.datos.direccion)}}function p(s,b){if(1&s){const i=o.RV6();o.j41(0,"ion-item",15)(1,"ion-label",21),o.EFF(2,"Tel\xe9fono"),o.k0s(),o.j41(3,"ion-input",23),o.mxI("ngModelChange",function(n){o.eBV(i);const a=o.XpG();return o.DH7(a.datos.telefono,n)||(a.datos.telefono=n),o.Njj(n)}),o.k0s()()}if(2&s){const i=o.XpG();o.R7$(3),o.Y8G("disabled",!0),o.R50("ngModel",i.datos.telefono)}}function g(s,b){if(1&s){const i=o.RV6();o.j41(0,"div")(1,"ion-item",15)(2,"ion-label",9),o.EFF(3,"Es Admin"),o.k0s(),o.j41(4,"ion-select",24),o.mxI("ngModelChange",function(n){o.eBV(i);const a=o.XpG();return o.DH7(a.datos.esadmin,n)||(a.datos.esadmin=n),o.Njj(n)}),o.j41(5,"ion-select-option",25),o.EFF(6,"SI"),o.k0s(),o.j41(7,"ion-select-option",26),o.EFF(8,"NO"),o.k0s()()(),o.j41(9,"ion-item",15)(10,"ion-label",9),o.EFF(11,"Activo"),o.k0s(),o.j41(12,"ion-select",27),o.mxI("ngModelChange",function(n){o.eBV(i);const a=o.XpG();return o.DH7(a.datos.activo,n)||(a.datos.activo=n),o.Njj(n)}),o.j41(13,"ion-select-option",25),o.EFF(14,"SI"),o.k0s(),o.j41(15,"ion-select-option",26),o.EFF(16,"NO"),o.k0s()()()()}if(2&s){const i=o.XpG();o.R7$(4),o.R50("ngModel",i.datos.esadmin),o.R7$(8),o.R50("ngModel",i.datos.activo)}}function m(s,b){if(1&s){const i=o.RV6();o.j41(0,"div")(1,"ion-item",15)(2,"ion-label",9),o.EFF(3,"Activar v\xeda Email"),o.k0s(),o.j41(4,"ion-select",28),o.mxI("ngModelChange",function(n){o.eBV(i);const a=o.XpG();return o.DH7(a.datos.activarSolicitud,n)||(a.datos.activarSolicitud=n),o.Njj(n)}),o.j41(5,"ion-select-option",25),o.EFF(6,"SI"),o.k0s(),o.j41(7,"ion-select-option",26),o.EFF(8,"NO"),o.k0s()()()()}if(2&s){const i=o.XpG();o.R7$(4),o.R50("ngModel",i.datos.activarSolicitud)}}function S(s,b){if(1&s){const i=o.RV6();o.j41(0,"div")(1,"ion-button",29),o.bIt("click",function(){o.eBV(i);const n=o.XpG();return o.Njj(n.cleanPerson(n.datos))}),o.EFF(2," Eliminar "),o.k0s()()}}const T=[{path:"",component:(()=>{class s{constructor(i,t,n,a,_,l,y,D,N,O,X){this.actionCtrl=i,this.navCtrl=t,this.modalCtrl=n,this.route=a,this.router=_,this.location=l,this.loaderSvc=y,this.alertSvc=D,this.apiSvc=N,this.authSvc=O,this.toastController=X,this.editMode=!1,this.manager=!1,this.dbo=!1,this.datos={idusuario:"",idpersona:null,nomusuario:"",documento:"",direccion:"",telefono:"",email:"",esadmin:"",activo:"",activodes:"",auditoria:"",desentidad:"",esadmindes:"",identidad:11,activarSolicitud:"S"},this.route.queryParams.subscribe(V=>{this.router.getCurrentNavigation().extras.state&&(this.datos=this.router.getCurrentNavigation().extras.state,this.datos=this.datos.data,this.editMode=!0)})}ngOnInit(){const i=this.authSvc.getUserInfo();this.manager="S"===i?.esadminent,this.dbo="S"===i?.esadmin}save(i){var t=this;return(0,h.A)(function*(){t.editMode?(yield t.loaderSvc.show("Actualizando.."),t.apiSvc.put("/usuarioentidad",i).subscribe({next:n=>{t.loaderSvc.stop(),t.presentToast(n),t.location.back()},error:n=>{console.log(n),t.loaderSvc.stop(),t.alertSvc.error(n.error.message)}})):(yield t.loaderSvc.show("Insertando.."),t.apiSvc.post("S"===t.datos.activarSolicitud?"/usuarioentidad/create/activate":"/usuarioentidad/create",i).subscribe({next:a=>{t.loaderSvc.stop(),t.presentToast(a),t.location.back()},error:a=>{console.log(a),t.loaderSvc.stop(),t.alertSvc.error(a.error.message)}}))})()}presentToast(i){var t=this;return(0,h.A)(function*(){(yield t.toastController.create({message:"Proceso exitoso!",duration:2e3})).present()})()}setPerson(){var i=this;return(0,h.A)(function*(){if(i.editMode)return;const t=yield i.modalCtrl.create({component:C.c,componentProps:{tipoContacto:"Empleado"}});yield t.present();const{data:n}=yield t.onDidDismiss();n&&(i.datos.idusuario=n.usuario||n.cedula||n.ruc||"",i.datos.idpersona=n.persona,i.datos.nomusuario=n.nombre||"",i.datos.documento=n.cedula||n.ruc||"",i.datos.direccion=n.direccion||"",i.datos.telefono=n.telefonos||"",i.datos.email=n.e_mail||"",i.datos.esadmin="N",i.datos.activo="S")})()}cleanPerson(i){var t=this;return(0,h.A)(function*(){!t.editMode||!t.dbo||(yield t.loaderSvc.show("Eliminando.."),t.apiSvc.post("/usuarioentidad/clean",i).subscribe({next:n=>{t.loaderSvc.stop(),t.presentToast(n),t.location.back()},error:n=>{console.log(n),t.loaderSvc.stop(),t.alertSvc.error(n.error.message)}}))})()}static{this.\u0275fac=function(t){return new(t||s)(o.rXU(d.GD),o.rXU(P.q9),o.rXU(d.W3),o.rXU(f.nX),o.rXU(f.Ix),o.rXU(j.aZ),o.rXU(U.Z),o.rXU(R.u),o.rXU(E.G),o.rXU(F.u),o.rXU(d.K_))}}static{this.\u0275cmp=o.VBU({type:s,selectors:[["app-usuarioentidadcrud"]],decls:38,vars:15,consts:[["simpleForm","ngForm"],[3,"title"],["color","primary",1,"ion-text-center","header-title"],[1,"ion-text-center"],[1,"ion-padding"],[1,"tai-form",3,"ngSubmit"],[1,"ion-justify-content-center"],["size","12","sizeMd","6"],[1,"cabecera"],["position","stacked",1,"required"],["name","idusuario","type","text","required","",1,"tai-input",3,"click","ngModelChange","readonly","ngModel"],["size","1"],["ios","search-outline","md","search-sharp",1,"tai-icon",3,"click"],["size","4"],["name","idpersona","type","number","required","",1,"tai-input",3,"ngModelChange","disabled","ngModel"],["lines","none"],["name","nomusuario","type","text","required","",1,"tai-input",3,"ngModelChange","disabled","ngModel"],["lines","none",4,"ngIf"],["name","email","type","email","pattern","[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}","required","",1,"tai-input",3,"ngModelChange","ngModel"],[4,"ngIf"],["type","submit","expand","block","color","secondary",1,"ion-margin-top",3,"disabled"],["position","stacked"],["name","direccion","type","text",1,"tai-input",3,"ngModelChange","disabled","ngModel"],["name","telefono","type","text",1,"tai-input",3,"ngModelChange","disabled","ngModel"],["name","esadmin","interface","popover","placeholder","Seleccionar","required","",1,"tai-input",3,"ngModelChange","ngModel"],["value","S"],["value","N"],["name","activo","interface","popover","placeholder","Seleccionar","required","",1,"tai-input",3,"ngModelChange","ngModel"],["name","solicitud","interface","popover","placeholder","Seleccionar","required","",1,"tai-input",3,"ngModelChange","ngModel"],["expand","block","color","danger",1,"ion-margin-top",3,"click"]],template:function(t,n){if(1&t){const a=o.RV6();o.j41(0,"app-header",1)(1,"ion-toolbar",2)(2,"p",3),o.EFF(3),o.k0s()()(),o.j41(4,"ion-content",4)(5,"form",5,0),o.bIt("ngSubmit",function(){return o.eBV(a),o.Njj(n.save(n.datos))}),o.j41(7,"ion-grid")(8,"ion-row",6)(9,"ion-col",7)(10,"ion-list")(11,"ion-grid",8)(12,"ion-row")(13,"ion-col")(14,"ion-label",9),o.EFF(15,"Id Usuario"),o.k0s(),o.j41(16,"ion-input",10),o.bIt("click",function(){return o.eBV(a),o.Njj(n.setPerson())}),o.mxI("ngModelChange",function(l){return o.eBV(a),o.DH7(n.datos.idusuario,l)||(n.datos.idusuario=l),o.Njj(l)}),o.k0s()(),o.j41(17,"ion-col",11)(18,"ion-icon",12),o.bIt("click",function(){return o.eBV(a),o.Njj(n.setPerson())}),o.k0s()(),o.j41(19,"ion-col",13)(20,"ion-label",9),o.EFF(21,"Persona"),o.k0s(),o.j41(22,"ion-input",14),o.mxI("ngModelChange",function(l){return o.eBV(a),o.DH7(n.datos.idpersona,l)||(n.datos.idpersona=l),o.Njj(l)}),o.k0s()()()(),o.j41(23,"ion-item",15)(24,"ion-label",9),o.EFF(25,"Nombre"),o.k0s(),o.j41(26,"ion-input",16),o.mxI("ngModelChange",function(l){return o.eBV(a),o.DH7(n.datos.nomusuario,l)||(n.datos.nomusuario=l),o.Njj(l)}),o.k0s()(),o.DNE(27,M,4,2,"ion-item",17)(28,p,4,2,"ion-item",17),o.j41(29,"ion-item",15)(30,"ion-label",9),o.EFF(31,"Email"),o.k0s(),o.j41(32,"ion-input",18),o.mxI("ngModelChange",function(l){return o.eBV(a),o.DH7(n.datos.email,l)||(n.datos.email=l),o.Njj(l)}),o.k0s()(),o.DNE(33,g,17,2,"div",19)(34,m,9,1,"div",19),o.j41(35,"ion-button",20),o.EFF(36,"Guardar"),o.k0s(),o.DNE(37,S,3,0,"div",19),o.k0s()()()()()()}if(2&t){const a=o.sdS(6);o.Y8G("title",n.editMode?"Actualizar Usuarios":"Registrar Usuario"),o.R7$(3),o.JRh(n.datos.idusuario),o.R7$(13),o.Y8G("readonly",n.editMode),o.R50("ngModel",n.datos.idusuario),o.R7$(6),o.Y8G("disabled",!0),o.R50("ngModel",n.datos.idpersona),o.R7$(4),o.Y8G("disabled",!0),o.R50("ngModel",n.datos.nomusuario),o.R7$(),o.Y8G("ngIf",n.datos.direccion),o.R7$(),o.Y8G("ngIf",n.datos.telefono),o.R7$(4),o.R50("ngModel",n.datos.email),o.R7$(),o.Y8G("ngIf",n.editMode&&n.dbo),o.R7$(),o.Y8G("ngIf",!n.editMode&&n.manager),o.R7$(),o.Y8G("disabled",a.invalid),o.R7$(2),o.Y8G("ngIf",n.manager&&n.editMode)}},dependencies:[j.bT,e.qT,e.BC,e.cb,e.YS,e.R_,e.vS,e.cV,d.Jm,d.hU,d.W9,d.lO,d.iq,d.$w,d.uz,d.he,d.nf,d.ln,d.Nm,d.Ip,d.ai,d.su,d.Je,d.Gw,c.l]})}}return s})()}];let k=(()=>{class s{static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275mod=o.$C({type:s})}static{this.\u0275inj=o.G2t({imports:[f.iI.forChild(T),f.iI]})}}return s})(),G=(()=>{class s{static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275mod=o.$C({type:s})}static{this.\u0275inj=o.G2t({imports:[j.MD,e.YN,d.bv,k,u.Q]})}}return s})()}}]);