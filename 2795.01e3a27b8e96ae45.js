"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2795],{2795:(J,h,a)=>{a.r(h),a.d(h,{ResumencobranzaPageModule:()=>X});var d=a(177),p=a(9417),m=a(1050),r=a(7343),l=a(467),v=a(1432),o=a(4438),f=a(385);function R(i,c){if(1&i){const t=o.RV6();o.j41(0,"ion-item",3),o.bIt("click",function(){const e=o.eBV(t).$implicit,s=o.XpG();return o.Njj(s.select(e.id))}),o.j41(1,"ion-label"),o.EFF(2),o.k0s()()}if(2&i){const t=c.$implicit;o.R7$(2),o.JRh(t.descripcion)}}let b=(()=>{class i{constructor(t){this.popoverCtrl=t,this.parametros=[{id:"P",descripcion:"A rendir"},{id:"R",descripcion:"Rendidas"},{id:"T",descripcion:"Todas"}]}ngOnInit(){}select(t){this.popoverCtrl.dismiss({id:t})}ExpandItem(t){}static{this.\u0275fac=function(n){return new(n||i)(o.rXU(r.IE))}}static{this.\u0275cmp=o.VBU({type:i,selectors:[["app-paramtrostiporesumen"]],decls:3,vars:1,consts:[["title","Parametros","mode","md","menuType",""],["no-padding",""],["detail","",3,"click",4,"ngFor","ngForOf"],["detail","",3,"click"]],template:function(n,e){1&n&&(o.nrm(0,"app-header",0),o.j41(1,"ion-list",1),o.DNE(2,R,3,1,"ion-item",2),o.k0s()),2&n&&(o.R7$(2),o.Y8G("ngForOf",e.parametros))},dependencies:[d.Sq,r.uz,r.he,r.nf,f.l]})}}return i})();var F=a(7468),_=a(5161),C=a(2464),T=a(1527),k=a(2130);function j(i,c){if(1&i&&(o.j41(0,"ion-row")(1,"ion-col",13),o.EFF(2),o.k0s(),o.j41(3,"ion-col",1),o.EFF(4),o.k0s(),o.j41(5,"ion-col",14),o.EFF(6),o.nI1(7,"number"),o.k0s()()),2&i){const t=c.$implicit;o.R7$(2),o.JRh(t.desvalor),o.R7$(2),o.JRh(t.idmoneda),o.R7$(2),o.JRh(o.bMT(7,3,t.mtototal))}}function z(i,c){if(1&i&&(o.j41(0,"ion-list")(1,"ion-grid")(2,"ion-row")(3,"ion-col",13),o.EFF(4,"Tipo"),o.k0s(),o.j41(5,"ion-col",1),o.EFF(6,"Moneda"),o.k0s(),o.j41(7,"ion-col",14),o.EFF(8,"Monto"),o.k0s()(),o.DNE(9,j,8,5,"ion-row",15),o.k0s()()),2&i){const t=o.XpG(2);o.R7$(9),o.Y8G("ngForOf",t.valores)}}function E(i,c){if(1&i){const t=o.RV6();o.j41(0,"ion-row",17),o.bIt("click",function(){const e=o.eBV(t).$implicit,s=o.XpG(3);return o.Njj(s.Action(e))}),o.j41(1,"ion-col",13),o.EFF(2),o.k0s(),o.j41(3,"ion-col",13),o.EFF(4),o.k0s(),o.j41(5,"ion-col",13),o.EFF(6),o.k0s(),o.j41(7,"ion-col",14),o.EFF(8),o.nI1(9,"number"),o.k0s()()}if(2&i){const t=c.$implicit;o.R7$(2),o.JRh(t.idmov),o.R7$(2),o.JRh(t.nrofisico),o.R7$(2),o.JRh(t.nompersona),o.R7$(2),o.Lme("",o.bMT(9,5,t.mtototal)," ",t.idmoneda,"")}}function S(i,c){if(1&i&&(o.j41(0,"ion-list")(1,"ion-grid")(2,"ion-row")(3,"ion-col",13),o.EFF(4,"Cobro"),o.k0s(),o.j41(5,"ion-col",13),o.EFF(6,"Recibo"),o.k0s(),o.j41(7,"ion-col",13),o.EFF(8,"Cliente"),o.k0s(),o.j41(9,"ion-col",14),o.EFF(10,"Total"),o.k0s()(),o.DNE(11,E,10,7,"ion-row",16),o.k0s()()),2&i){const t=o.XpG(2);o.R7$(11),o.Y8G("ngForOf",t.cobros)}}function y(i,c){if(1&i){const t=o.RV6();o.j41(0,"ion-grid")(1,"ion-row",8)(2,"ion-col",9)(3,"ion-segment",10),o.mxI("ngModelChange",function(e){o.eBV(t);const s=o.XpG();return o.DH7(s.currentSegment,e)||(s.currentSegment=e),o.Njj(e)}),o.j41(4,"ion-segment-button",11)(5,"ion-label"),o.EFF(6,"Cobros"),o.k0s()(),o.j41(7,"ion-segment-button",12)(8,"ion-label"),o.EFF(9,"Resumen"),o.k0s()()(),o.DNE(10,z,10,1,"ion-list",7)(11,S,12,1,"ion-list",7),o.k0s()()()}if(2&i){const t=o.XpG();o.R7$(3),o.R50("ngModel",t.currentSegment),o.R7$(7),o.Y8G("ngIf","resumen"===t.currentSegment),o.R7$(),o.Y8G("ngIf","cobro"===t.currentSegment)}}let g=(()=>{class i{constructor(t,n,e,s,u,A,M,U){this.actionCtrl=t,this.loaderSvc=n,this.authSvc=e,this.alertSvc=s,this.alertCtrl=u,this.apiSvc=A,this.router=M,this.popoverCtrl=U,this.cobros=[],this.valores=[],this.totalAmount=0,this.Titulo="",this.parametro="HOY",this.tiporendicion="T",this.tiporendiciondes="Todos",this.parametroRtc={},this.parametroTitulo="",this.maskType="separator.0",this.currentSegment="cobro"}ngOnInit(){var t=this;return(0,l.A)(function*(){t.initialize()})()}initialize(){var t=this;return(0,l.A)(function*(){yield t.loaderSvc.show("Cargando"),(0,F.p)([t.apiSvc.post("/resumentipovalor",{entidad:16,parametro:t.parametro,tiporendicion:t.tiporendicion}),t.apiSvc.post("/listacobro",{entidad:16,parametro:t.parametro,tiporendicion:t.tiporendicion})]).subscribe({next:n=>{t.valores=n[0].data,t.cobros=n[1].data.data,t.parametroTitulo=t.tiporendiciondes+"  "+n[1].data.parametros.fechaini+" al "+n[1].data.parametros.fechafin,t.Titulo="Cobros de "+t.authSvc.getUserInfo()?.usuario,t.loaderSvc.stop()},error:n=>{t.alertSvc.error("Error al obtener resumen de cobranza"),t.loaderSvc.stop()}})})()}Action(t){var n=this;return(0,l.A)(function*(){yield(yield n.actionCtrl.create({buttons:[{text:"Ver detalles del Cobro",role:"create",icon:"cash",handler:()=>{n.router.navigate(["detallecobranza"],{state:{data:{idcaja:t.idcaja,idmov:t.idmov,fechoramov:t.fechoramov,idmoneda:t.idmoneda,mtototal:t.mtototal,nrofisico:t.nrofisico,idusuario:t.idusuario,ctz:t.ctz},cliente:{id:t.idpersona,documento:t.idpersona,nombre:t.nompersona},cobrador:{id:t.idcobrador,nomcobrador:t.nomcobrador}}})}},{text:"Anular Cobro",role:"destructive",icon:"trash",handler:()=>n.deleteConfirm(t)},{text:"Cancelar",icon:"close",role:"cancel",handler:()=>{console.log("Cancel clicked")}}]})).present()})()}deleteConfirm(t){var n=this;return(0,l.A)(function*(){yield(yield n.alertCtrl.create({header:"Confirmaci\xf3n",message:"\xbfEst\xe1s seguro de Anular el Cobro?",buttons:[{text:"Si",handler:()=>{n.loaderSvc.show("Anulando").then(()=>{n.apiSvc.post("/borracobro",{entidad:16,idmov:t.idmov}).subscribe(s=>{n.loaderSvc.stop(),n.alertSvc.success("Cobro Anulado!"),n.cobros=n.cobros.filter(u=>u.idmov!==t.idmov)},s=>{n.loaderSvc.stop(),n.alertSvc.error(s.error.data)})})}},{text:"No",role:"cancel",cssClass:"secondary"}]})).present()})()}abrirParametros(){var t=this;return(0,l.A)(function*(){const n=yield t.popoverCtrl.create({component:v.n});yield n.present();const{data:e}=yield n.onWillDismiss();e&&(t.parametro=e.id,t.initialize())})()}abrirParametrosTipoResumen(){var t=this;return(0,l.A)(function*(){const n=yield t.popoverCtrl.create({component:b});yield n.present();const{data:e}=yield n.onWillDismiss();e&&(t.tiporendicion=e.id,"P"===t.tiporendicion?t.tiporendiciondes="A rendir":"R"===t.tiporendicion?t.tiporendiciondes="Rendidas":"T"===t.tiporendicion&&(t.tiporendiciondes="Todas"),t.initialize())})()}static{this.\u0275fac=function(n){return new(n||i)(o.rXU(r.GD),o.rXU(_.Z),o.rXU(C.u),o.rXU(T.u),o.rXU(r.hG),o.rXU(k.G),o.rXU(m.Ix),o.rXU(r.IE))}}static{this.\u0275cmp=o.VBU({type:i,selectors:[["app-resumencobranza"]],decls:11,vars:3,consts:[[3,"title"],[1,"ion-text-center"],["right",""],[3,"click"],["name","document","slot","icon-only"],["right","",3,"click"],["slot","icon-only","ios","ellipsis-horizontal","md","ellipsis-vertical"],[4,"ngIf"],[1,"ion-justify-content-center"],["size-md","6","size","12"],[3,"ngModelChange","ngModel"],["value","cobro"],["value","resumen"],[1,"ion-text-start"],[1,"ion-text-end"],[4,"ngFor","ngForOf"],["style","border-bottom: 1px solid #f1f1f1;",3,"click",4,"ngFor","ngForOf"],[2,"border-bottom","1px solid #f1f1f1",3,"click"]],template:function(n,e){1&n&&(o.j41(0,"app-header",0)(1,"ion-toolbar")(2,"p",1),o.EFF(3),o.k0s()(),o.j41(4,"div",2)(5,"ion-button",3),o.bIt("click",function(){return e.abrirParametrosTipoResumen()}),o.nrm(6,"ion-icon",4),o.k0s(),o.j41(7,"ion-button",5),o.bIt("click",function(){return e.abrirParametros()}),o.nrm(8,"ion-icon",6),o.k0s()()(),o.j41(9,"ion-content"),o.DNE(10,y,12,3,"ion-grid",7),o.k0s()),2&n&&(o.Y8G("title",e.Titulo),o.R7$(3),o.JRh(e.parametroTitulo),o.R7$(7),o.Y8G("ngIf",e.valores.length>0))},dependencies:[d.Sq,d.bT,p.BC,p.vS,r.Jm,r.hU,r.W9,r.lO,r.iq,r.he,r.nf,r.ln,r.Gp,r.eP,r.ai,r.Je,f.l,d.QX],styles:["ion-col[_ngcontent-%COMP%]{font-size:12px}"]})}}return i})();const P=[{path:"",component:g}];let x=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=o.$C({type:i})}static{this.\u0275inj=o.G2t({imports:[m.iI.forChild(P),m.iI]})}}return i})();var I=a(9244),$=a(5188);const G=[{path:"",component:g}];let X=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=o.$C({type:i})}static{this.\u0275inj=o.G2t({imports:[d.MD,p.YN,r.bv,x,m.iI.forChild(G),I.Q,$.mB]})}}return i})()}}]);