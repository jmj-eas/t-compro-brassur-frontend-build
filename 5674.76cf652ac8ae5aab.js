"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5674],{5674:(ro,k,d)=>{d.r(k),d.d(k,{JmjGastoPageModule:()=>io});var f=d(177),p=d(9417),r=d(7343),j=d(1050),u=d(467),m=d(7586),P=d(5312),o=d(4438),M=d(2226),v=d(385);const T=["search"];function F(a,g){1&a&&o.nrm(0,"ion-spinner",7)}function D(a,g){if(1&a){const t=o.RV6();o.j41(0,"ion-item",8),o.bIt("click",function(n){const i=o.eBV(t).$implicit,c=o.XpG();return o.Njj(c.seleccionarProducto(i,n))}),o.j41(1,"ion-label"),o.EFF(2),o.k0s(),o.nrm(3,"ion-radio",9),o.k0s()}if(2&a){const t=g.$implicit,e=o.XpG();o.R7$(2),o.Lme("",t.codigoArticulo," - ",t.nombre,""),o.R7$(),o.Y8G("value",t)("checked",(null==e.producto?null:e.producto.codigoArticulo)===t.codigoArticulo)}}let I=(()=>{class a{constructor(t,e){this.jmjTomarDatosGlobales=t,this.modalCtrl=e,this.loading=!1,this.cerrandoModal=!1}ngOnInit(){var t=this;return(0,u.A)(function*(){console.log("[JmjBuscarProducto] ngOnInit - INICIO"),console.log("[JmjBuscarProducto] ngOnInit - tipoGasto:",t.tipoGasto),t.titulo="Buscador de Conceptos",t.productosOriginales=[];const e=yield t.jmjTomarDatosGlobales.getProductosConcepto();console.log("[JmjBuscarProducto] ngOnInit - Conceptos recibidos:",e?.length||0),t.productosOriginales=e||[],console.log("[JmjBuscarProducto] ngOnInit - productosOriginales despu\xe9s de asignar:",t.productosOriginales.length),t.productos=[],t.productos=[...t.productosOriginales],console.log("[JmjBuscarProducto] ngOnInit - productos despu\xe9s de copiar:",t.productos.length),console.log("[JmjBuscarProducto] ngOnInit - productos finales:",t.productos.length)})()}ionViewDidEnter(){setTimeout(()=>{this.search.setFocus()})}buscar(t){const e=t.target.value;this.productos=[...this.productosOriginales],e&&""!=e.trim()&&(this.productos=this.productos.filter(n=>!!(n&&n.codigoArticulo&&n.nombre)&&n.codigoArticulo.concat(n.nombre).toLowerCase().indexOf(e.toLowerCase())>-1))}seleccionarProducto(t,e){console.log("[JmjBuscarProducto] seleccionarProducto - INICIO"),console.log("[JmjBuscarProducto] seleccionarProducto - producto recibido:",t),console.log("[JmjBuscarProducto] seleccionarProducto - cerrandoModal:",this.cerrandoModal),e&&(e.stopPropagation(),e.preventDefault()),this.cerrandoModal?console.log("[JmjBuscarProducto] seleccionarProducto - SALIENDO: Modal ya se est\xe1 cerrando"):t?this.producto&&this.producto.codigoArticulo===t.codigoArticulo?console.log("[JmjBuscarProducto] seleccionarProducto - SALIENDO: Mismo producto ya seleccionado"):(this.cerrandoModal=!0,this.producto=t,console.log("[JmjBuscarProducto] seleccionarProducto - Producto asignado:",this.producto.nombre),setTimeout(()=>{console.log("[JmjBuscarProducto] seleccionarProducto - Cerrando modal..."),this.modalCtrl.dismiss(this.producto).then(()=>{console.log("[JmjBuscarProducto] seleccionarProducto - Modal cerrado exitosamente"),this.cerrandoModal=!1}).catch(n=>{console.error("[JmjBuscarProducto] seleccionarProducto - ERROR al cerrar modal:",n),this.cerrandoModal=!1})},100)):console.log("[JmjBuscarProducto] seleccionarProducto - SALIENDO: Producto es null/undefined")}static{this.\u0275fac=function(e){return new(e||a)(o.rXU(M.C),o.rXU(r.W3))}}static{this.\u0275cmp=o.VBU({type:a,selectors:[["app-jmj-buscar-producto"]],viewQuery:function(e,n){if(1&e&&o.GBs(T,5),2&e){let i;o.mGM(i=o.lsd())&&(n.search=i.first)}},inputs:{tipoGasto:"tipoGasto"},decls:9,vars:5,consts:[["search",""],[3,"menuType","title"],["placeholder","Buscar","showCancelButton","focus","animated","",3,"ionChange"],[1,"ion-text-center"],["name","dots",4,"ngIf"],[3,"ngModelChange","ngModel"],[3,"click",4,"ngFor","ngForOf"],["name","dots"],[3,"click"],[3,"value","checked"]],template:function(e,n){if(1&e){const i=o.RV6();o.nrm(0,"app-header",1),o.j41(1,"ion-content")(2,"ion-searchbar",2,0),o.bIt("ionChange",function(l){return o.eBV(i),o.Njj(n.buscar(l))}),o.k0s(),o.j41(4,"p",3),o.DNE(5,F,1,0,"ion-spinner",4),o.k0s(),o.j41(6,"ion-list")(7,"ion-radio-group",5),o.mxI("ngModelChange",function(l){return o.eBV(i),o.DH7(n.producto,l)||(n.producto=l),o.Njj(l)}),o.DNE(8,D,4,4,"ion-item",6),o.k0s()()()}2&e&&(o.Y8G("menuType","modal")("title",n.titulo),o.R7$(5),o.Y8G("ngIf",n.loading),o.R7$(2),o.R50("ngModel",n.producto),o.R7$(),o.Y8G("ngForOf",n.productos))},dependencies:[f.Sq,f.bT,r.W9,r.uz,r.he,r.nf,r.KO,r.f0,r.S1,r.w2,r.Je,r.Gw,p.BC,p.vS,v.l]})}}return a})();var w=d(1527),y=d(2130),G=d(5161),S=d(5188);const R=["loteForm"];function A(a,g){if(1&a){const t=o.RV6();o.j41(0,"ion-button",4),o.bIt("click",function(){o.eBV(t);const n=o.XpG();return o.Njj(n.Delete())}),o.nrm(1,"ion-icon",22),o.k0s()}}function E(a,g){if(1&a){const t=o.RV6();o.j41(0,"div",11)(1,"ion-label",12),o.EFF(2," Concepto "),o.j41(3,"span",13),o.EFF(4,"*"),o.k0s()(),o.j41(5,"div",23),o.bIt("click",function(){o.eBV(t);const n=o.XpG();return o.Njj(n.getProducto())}),o.j41(6,"ion-input",24),o.mxI("ngModelChange",function(n){o.eBV(t);const i=o.XpG();return o.DH7(i.iJmjProductoMp.descripcionArticulo,n)||(i.iJmjProductoMp.descripcionArticulo=n),o.Njj(n)}),o.k0s(),o.nrm(7,"ion-icon",25),o.k0s()()}if(2&a){const t=o.XpG();o.R7$(6),o.R50("ngModel",t.iJmjProductoMp.descripcionArticulo),o.Y8G("readonly",!0)("placeholder",t.placeholder)}}let B=(()=>{class a{constructor(t,e,n,i,c){this.modalCtrl=t,this.jmjTomarDatosGlobales=e,this.alertSvc=n,this.apiSvc=i,this.loaderSvc=c,this.showNameAdditionalInputsPri=!0,this.showNameAdditionalInputsAdi=!0,this.options=P.c.calendarOptions,this.importeTotal=0}ngOnInit(){var t=this;return(0,u.A)(function*(){t.titulo="Carga de Concepto",t.placeholder="Concepto",t.labelCantidad="Cantidad",yield t.cargarConceptos(),t.editMode=!!(t.iJmjProductoMp.codigoArticulo&&t.iJmjProductoMp.cantidad>0),t.editMode||t.iJmjProductoFijo&&(t.iJmjProductoMp.precioUnitario=t.iJmjProductoFijo.precioUnitario),t.calcularImporteTotal()})()}cargarConceptos(){var t=this;return(0,u.A)(function*(){console.log("[JmjProductoModal] cargarConceptos - INICIO"),console.log("[JmjProductoModal] cargarConceptos - tipoGasto:",t.tipoGasto);try{yield t.loaderSvc.show("Cargando conceptos...");const e={idubi:P.c.idubi,cantfilas:1e3,filadesde:1,whereadic:"",orderby:"descripcion ASC"};console.log("[JmjProductoModal] cargarConceptos - Body a enviar:",e),t.apiSvc.post("/conceptos_op",e).subscribe(n=>{if(console.log("[JmjProductoModal] cargarConceptos - Respuesta recibida:",n),t.loaderSvc.stop(),n&&n.data&&Array.isArray(n.data)){console.log("[JmjProductoModal] cargarConceptos - response.data es array, cantidad:",n.data.length);const i=n.data.map(c=>({codigoArticulo:c.concepto.toString(),nombre:c.descripcion,controlCalidad:!1,precioUnitario:0,tipoArticulo:"G",facturacion:"S",bienCritico:!1,iso22000:!1,criticoOe:!1,parcelaObligatoria:!1,aprovisionamientoQm:!1,claveControl:null,concepto:c.concepto,tipo:c.tipo,orden:c.orden,signo:c.signo}));console.log("[JmjProductoModal] cargarConceptos - Conceptos mapeados:",i.length),t.iJmjProductos=i,console.log("[JmjProductoModal] cargarConceptos - Conceptos finales:",t.iJmjProductos.length)}else console.log("[JmjProductoModal] cargarConceptos - No se recibieron datos v\xe1lidos"),t.iJmjProductos=[]},n=>{console.error("[JmjProductoModal] cargarConceptos - ERROR:",n),t.loaderSvc.stop(),t.alertSvc.error("Error al cargar conceptos"),t.iJmjProductos=[]})}catch(e){console.error("[JmjProductoModal] cargarConceptos - EXCEPCI\xd3N:",e),t.loaderSvc.stop(),t.alertSvc.error("Error al cargar conceptos"),t.iJmjProductos=[]}})()}close(){this.modalCtrl.dismiss(null)}submit(){var t=this;return(0,u.A)(function*(){t.validaciones()&&t.modalCtrl.dismiss({success:!0,data:t.iJmjProductoMp})})()}getProducto(){var t=this;return(0,u.A)(function*(){const e=yield t.modalCtrl.create({component:I,componentProps:{tipoGasto:t.tipoGasto}});yield e.present();const{data:n}=yield e.onDidDismiss();n&&(t.iJmjProductoMp.codigoArticulo=n.codigoArticulo,t.iJmjProductoMp.descripcionArticulo=n.nombre,t.iJmjProductoMp.facturacion=n.facturacion)})()}setProducto(){const t=this.iJmjProductos.indexOf(this.iJmjProductos.find(e=>e.codigoArticulo===this.iJmjProductoMp.codigoArticulo));-1!==t&&(this.iJmjProductoMp.descripcionArticulo=this.iJmjProductos[t].nombre,this.iJmjProductoMp.facturacion=this.iJmjProductos[t].facturacion)}calcularImporteTotal(){this.importeTotal=Number((this.iJmjProductoMp.cantidad*this.iJmjProductoMp.precioUnitario).toFixed(0))}validaciones(){return!(!this.iJmjProductoMp.cantidad||this.iJmjProductoMp.cantidad<.001||!this.iJmjProductoMp.precioUnitario||0===this.iJmjProductoMp.precioUnitario)}Delete(){}selectField(t){t.target.select()}static{this.\u0275fac=function(e){return new(e||a)(o.rXU(r.W3),o.rXU(M.C),o.rXU(w.u),o.rXU(y.G),o.rXU(G.Z))}}static{this.\u0275cmp=o.VBU({type:a,selectors:[["app-jmj-producto-modal"]],viewQuery:function(e,n){if(1&e&&o.GBs(R,7),2&e){let i;o.mGM(i=o.lsd())&&(n.formLote=i.first)}},inputs:{iJmjProductoMp:"iJmjProductoMp",tipoFactura:"tipoFactura",iJmjProductoFijo:"iJmjProductoFijo",talonarioRecibo:"talonarioRecibo",tipoGasto:"tipoGasto"},decls:42,vars:8,consts:[["loteForm","ngForm"],["color","primary"],["slot","end"],[3,"click",4,"ngIf"],[3,"click"],["slot","icon-only","name","close"],[1,"product-form",3,"ngSubmit"],[1,"section-title-header"],["name","cube-outline"],[1,"form-section"],["class","form-field",4,"ngIf"],[1,"form-field"],[1,"field-label"],[1,"required"],["name","cantidad","type","number","required","","inputmode","numeric","step","0.001","min","0.001","placeholder","Ingrese la cantidad",1,"unified-input","numeric-input",3,"ngModelChange","ionChange","ngModel"],["name","precioUnitario","id","preciounitario","type","text","inputmode","numeric","required","","mask","separator.2","thousandSeparator",".","decimalMarker",",","autocomplete","off","placeholder","0,00",1,"unified-input","numeric-input",3,"ngModelChange","change","focusout","click","ngModel"],["name","importeTotal","id","importeTotal","type","text","mask","separator.2","thousandSeparator",".","decimalMarker",",","readonly","true","placeholder","0,00",1,"unified-input","readonly-field","numeric-input",3,"ngModelChange","ngModel"],["slot","start",1,"footer-buttons"],["color","primary","expand","block","size","default",1,"footer-button",3,"click","disabled"],["slot","start","name","checkmark-circle"],["color","secondary","expand","block","size","default",1,"footer-button",3,"click"],["slot","start","name","close-circle"],["slot","icon-only","name","trash-outline"],[1,"input-wrapper","clickable",3,"click"],["name","idproducto",1,"unified-input","readonly-field",3,"ngModelChange","ngModel","readonly","placeholder"],["name","search-outline",1,"input-icon"]],template:function(e,n){if(1&e){const i=o.RV6();o.j41(0,"ion-header")(1,"ion-toolbar",1)(2,"ion-title"),o.EFF(3),o.k0s(),o.j41(4,"ion-buttons",2),o.DNE(5,A,2,0,"ion-button",3),o.j41(6,"ion-button",4),o.bIt("click",function(){return o.eBV(i),o.Njj(n.close())}),o.nrm(7,"ion-icon",5),o.k0s()()()(),o.j41(8,"ion-content")(9,"form",6,0),o.bIt("ngSubmit",function(){return o.eBV(i),o.Njj(n.submit())}),o.j41(11,"div",7),o.nrm(12,"ion-icon",8),o.j41(13,"span"),o.EFF(14,"Datos Principales"),o.k0s()(),o.j41(15,"div",9),o.DNE(16,E,8,3,"div",10),o.j41(17,"div",11)(18,"ion-label",12),o.EFF(19),o.j41(20,"span",13),o.EFF(21,"*"),o.k0s()(),o.j41(22,"ion-input",14),o.mxI("ngModelChange",function(l){return o.eBV(i),o.DH7(n.iJmjProductoMp.cantidad,l)||(n.iJmjProductoMp.cantidad=l),o.Njj(l)}),o.bIt("ionChange",function(){return o.eBV(i),o.Njj(n.calcularImporteTotal())}),o.k0s()(),o.j41(23,"div",11)(24,"ion-label",12),o.EFF(25," Precio Unitario "),o.j41(26,"span",13),o.EFF(27,"*"),o.k0s()(),o.j41(28,"input",15),o.mxI("ngModelChange",function(l){return o.eBV(i),o.DH7(n.iJmjProductoMp.precioUnitario,l)||(n.iJmjProductoMp.precioUnitario=l),o.Njj(l)}),o.bIt("change",function(){return o.eBV(i),o.Njj(n.calcularImporteTotal())})("focusout",function(){return o.eBV(i),o.Njj(n.calcularImporteTotal())})("click",function(l){return o.eBV(i),o.Njj(n.selectField(l))}),o.k0s()(),o.j41(29,"div",11)(30,"ion-label",12),o.EFF(31," Importe Total "),o.k0s(),o.j41(32,"input",16),o.mxI("ngModelChange",function(l){return o.eBV(i),o.DH7(n.importeTotal,l)||(n.importeTotal=l),o.Njj(l)}),o.k0s()()()()(),o.j41(33,"ion-footer")(34,"ion-toolbar")(35,"ion-buttons",17)(36,"ion-button",18),o.bIt("click",function(){return o.eBV(i),o.Njj(n.submit())}),o.nrm(37,"ion-icon",19),o.EFF(38," Aceptar "),o.k0s(),o.j41(39,"ion-button",20),o.bIt("click",function(){return o.eBV(i),o.Njj(n.close())}),o.nrm(40,"ion-icon",21),o.EFF(41," Cancelar "),o.k0s()()()()}2&e&&(o.R7$(3),o.JRh(n.titulo),o.R7$(2),o.Y8G("ngIf",n.editMode),o.R7$(11),o.Y8G("ngIf","MP"!==n.tipoFactura),o.R7$(3),o.SpI(" ",n.labelCantidad," "),o.R7$(3),o.R50("ngModel",n.iJmjProductoMp.cantidad),o.R7$(6),o.R50("ngModel",n.iJmjProductoMp.precioUnitario),o.R7$(4),o.R50("ngModel",n.importeTotal),o.R7$(4),o.Y8G("disabled",n.formLote.invalid))},dependencies:[f.bT,r.Jm,r.QW,r.W9,r.M0,r.eU,r.iq,r.$w,r.he,r.BC,r.ai,r.su,r.Gw,r.T6,p.qT,p.me,p.BC,p.cb,p.YS,p.vS,p.cV,S.Zr],styles:["ion-content[_ngcontent-%COMP%]{--background: $color-white !important;background:#fff!important;color:var(--ion-color-dark)!important}.product-form[_ngcontent-%COMP%]{padding:16px;background:#fff}@media (min-width: 768px){.product-form[_ngcontent-%COMP%]{padding:24px;max-width:600px;margin:0 auto}}.section-title-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px;margin:16px 0;background:var(--ion-color-success, #2dd36f);border-radius:8px}.section-title-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#fff;font-size:20px}.section-title-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:15px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;color:#fff}.form-section[_ngcontent-%COMP%]{padding:0;background:#fff}.form-field[_ngcontent-%COMP%]{margin-bottom:16px;width:100%}.form-field[_ngcontent-%COMP%]:last-child{margin-bottom:0}.field-label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:500;color:#666;margin-bottom:8px}.field-label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-weight:600}@media (min-width: 768px){.field-label[_ngcontent-%COMP%]{font-size:15px}}.unified-input[_ngcontent-%COMP%]{width:100%;height:48px;padding:0 16px;font-size:16px;background:#fff!important;border:1px solid #e0e0e0;border-radius:8px;color:#000!important;transition:border-color .2s;box-sizing:border-box}@media (min-width: 768px){.unified-input[_ngcontent-%COMP%]{font-size:15px;height:44px}}.unified-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--ion-color-primary);color:#000!important}.unified-input[_ngcontent-%COMP%]::placeholder{color:#999!important;opacity:1;font-weight:400}.unified-input[readonly][_ngcontent-%COMP%], .readonly-field[_ngcontent-%COMP%]{background:#f4f5f8!important;color:#666!important;cursor:pointer;border-color:#d0d0d0}.readonly-field[_ngcontent-%COMP%]:focus{background:#f4f5f8!important;color:#666!important}.numeric-input[_ngcontent-%COMP%]{text-align:right!important;font-weight:500}.numeric-input[_ngcontent-%COMP%]::placeholder{text-align:right}ion-input.numeric-input[_ngcontent-%COMP%]     input{text-align:right!important;color:#000!important}ion-input.numeric-input[_ngcontent-%COMP%]     input::placeholder{color:#999!important;opacity:1}.input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;width:100%;background:#f4f5f8!important;border:1px solid #d0d0d0;border-radius:8px;transition:all .2s}.input-wrapper.clickable[_ngcontent-%COMP%]{cursor:pointer}.input-wrapper.clickable[_ngcontent-%COMP%]:active{opacity:.8}.input-wrapper[_ngcontent-%COMP%]   .unified-input[_ngcontent-%COMP%]{border:none;background:transparent!important;flex:1;color:#666!important}.input-wrapper[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%]{position:absolute;right:16px;color:var(--ion-color-primary);font-size:20px;pointer-events:none}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--min-height: 56px;--background: $color-primary;--color: white;background:var(--ion-color-primary)!important}ion-header[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#fff}ion-header[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--color: white}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: $color-white;background:#fff!important;--padding-start: $spacing-md;--padding-end: $spacing-md;--min-height: auto;padding:12px 0;border-top:1px solid #e0e0e0}@media (min-width: 768px){ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--padding-start: $spacing-lg;--padding-end: $spacing-lg;padding:16px 0}}.footer-buttons[_ngcontent-%COMP%]{display:flex;gap:12px;width:100%}@media (min-width: 768px){.footer-buttons[_ngcontent-%COMP%]{gap:16px;width:auto}}.footer-button[_ngcontent-%COMP%]{flex:1;margin:0;--border-radius: $border-radius;font-weight:500;text-transform:none;height:48px}@media (min-width: 768px){.footer-button[_ngcontent-%COMP%]{flex:0 1 auto;min-width:140px;height:44px}}.footer-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:8px}.footer-button[disabled][_ngcontent-%COMP%]{opacity:.5}*[_ngcontent-%COMP%]{background-color:transparent}ion-item[_ngcontent-%COMP%]{--background: transparent;background:transparent!important}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{background:transparent!important;color:#666}ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--background: transparent;background:transparent!important;color:#666}@media (max-width: 767px){.product-form[_ngcontent-%COMP%]{padding:12px}.form-section[_ngcontent-%COMP%]{padding:0}.form-field[_ngcontent-%COMP%]{margin-bottom:12px}}@media (min-width: 768px){.product-form[_ngcontent-%COMP%]{padding:24px}}"]})}}return a})();var N=d(7469),Y=d(4709);function z(a,g){if(1&a){const t=o.RV6();o.j41(0,"div",16)(1,"ion-label",17),o.EFF(2,"Hora (opcional)"),o.k0s(),o.j41(3,"ion-datetime",18),o.mxI("ngModelChange",function(n){o.eBV(t);const i=o.XpG();return o.DH7(i.selectedTime,n)||(i.selectedTime=n),o.Njj(n)}),o.k0s()()}if(2&a){const t=o.XpG();o.R7$(3),o.R50("ngModel",t.selectedTime),o.Y8G("preferWheel",!0)("showDefaultButtons",!1)("showDefaultTitle",!1)("hourCycle","h23")("minuteValues","0,15,30,45")}}let U=(()=>{class a{constructor(t){this.modalController=t,this.showTimePicker=!1}ngOnInit(){let t;this.objConfig?.inputDate?(t=m(this.objConfig.inputDate),t.isValid()||(t=m())):t=m(),this.selectedDate=t.format("YYYY-MM-DD"),this.selectedTime=t.format("HH:mm"),this.showTimePicker=!1,this.objConfig?.fromDate&&(this.minDate=m(this.objConfig.fromDate).format("YYYY-MM-DD")),this.maxDate=this.objConfig?.toDate?m(this.objConfig.toDate).format("YYYY-MM-DD"):m("2040-12-31").format("YYYY-MM-DD")}onDateChange(t){t.detail&&t.detail.value&&(this.selectedDate=t.detail.value,this.selectedTime=m().format("HH:mm"))}toggleTimePicker(){this.showTimePicker=!this.showTimePicker,this.showTimePicker&&!this.selectedTime&&(this.selectedTime=m().format("HH:mm"))}confirm(){if(this.selectedDate){const t=this.selectedTime||m().format("HH:mm"),e=m(`${this.selectedDate}T${t}`),n=e.format(this.objConfig?.dateFormat||"DD/MM/YYYY HH:mm");this.modalController.dismiss({date:n,dateObj:e.toDate()})}}cancel(){this.modalController.dismiss()}today(){const t=m();this.selectedDate=t.format("YYYY-MM-DD"),this.selectedTime=t.format("HH:mm")}static{this.\u0275fac=function(e){return new(e||a)(o.rXU(r.W3))}}static{this.\u0275cmp=o.VBU({type:a,selectors:[["app-jmj-datepicker-modal"]],inputs:{objConfig:"objConfig"},decls:23,vars:12,consts:[["color","primary"],["slot","end"],[3,"click"],["slot","icon-only","name","close"],[1,"ion-padding"],[1,"datetime-container"],["presentation","date","locale","es-ES",1,"calendar-datetime",3,"ngModelChange","ionChange","ngModel","min","max","preferWheel","showDefaultButtons","showDefaultTitle"],["class","time-section",4,"ngIf"],[1,"button-container"],["expand","block","fill","outline","size","small",1,"action-button",3,"click"],["slot","start",3,"name"],["expand","block","fill","outline",1,"action-button",3,"click"],["slot","start","name","calendar-outline"],["expand","block","color","primary",1,"action-button","confirm-button",3,"click"],["slot","start","name","checkmark-circle"],["expand","block","fill","clear",1,"action-button",3,"click"],[1,"time-section"],[1,"time-label"],["presentation","time","locale","es-ES",1,"time-datetime",3,"ngModelChange","ngModel","preferWheel","showDefaultButtons","showDefaultTitle","hourCycle","minuteValues"]],template:function(e,n){1&e&&(o.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),o.EFF(3,"Seleccionar Fecha"),o.k0s(),o.j41(4,"ion-buttons",1)(5,"ion-button",2),o.bIt("click",function(){return n.cancel()}),o.nrm(6,"ion-icon",3),o.k0s()()()(),o.j41(7,"ion-content",4)(8,"div",5)(9,"ion-datetime",6),o.mxI("ngModelChange",function(c){return o.DH7(n.selectedDate,c)||(n.selectedDate=c),c}),o.bIt("ionChange",function(c){return n.onDateChange(c)}),o.k0s(),o.DNE(10,z,4,6,"div",7),o.k0s(),o.j41(11,"div",8)(12,"ion-button",9),o.bIt("click",function(){return n.toggleTimePicker()}),o.nrm(13,"ion-icon",10),o.EFF(14),o.k0s(),o.j41(15,"ion-button",11),o.bIt("click",function(){return n.today()}),o.nrm(16,"ion-icon",12),o.EFF(17),o.k0s(),o.j41(18,"ion-button",13),o.bIt("click",function(){return n.confirm()}),o.nrm(19,"ion-icon",14),o.EFF(20),o.k0s(),o.j41(21,"ion-button",15),o.bIt("click",function(){return n.cancel()}),o.EFF(22),o.k0s()()()),2&e&&(o.R7$(9),o.R50("ngModel",n.selectedDate),o.Y8G("min",n.minDate)("max",n.maxDate)("preferWheel",!1)("showDefaultButtons",!1)("showDefaultTitle",!0),o.R7$(),o.Y8G("ngIf",n.showTimePicker),o.R7$(3),o.Y8G("name",n.showTimePicker?"time-outline":"time"),o.R7$(),o.SpI(" ",n.showTimePicker?"Ocultar Hora":"Ajustar Hora"," "),o.R7$(3),o.SpI(" ",(null==n.objConfig?null:n.objConfig.todayLabel)||"Hoy"," "),o.R7$(3),o.SpI(" ",(null==n.objConfig?null:n.objConfig.setLabel)||"Confirmar"," "),o.R7$(2),o.SpI(" ",(null==n.objConfig?null:n.objConfig.closeLabel)||"Cancelar"," "))},dependencies:[f.bT,r.Jm,r.QW,r.W9,r.A9,r.eU,r.iq,r.he,r.BC,r.ai,r.Je,p.BC,p.vS],styles:[".datetime-container[_ngcontent-%COMP%]{padding:16px;display:flex;flex-direction:column;align-items:center;gap:20px;min-height:300px;background:var(--ion-background-color, #ffffff)}.datetime-container[_ngcontent-%COMP%]   .calendar-datetime[_ngcontent-%COMP%]{--background: var(--ion-background-color, #ffffff);--background-rgb: 255, 255, 255;background:var(--ion-background-color, #ffffff);border-radius:12px;padding:16px;width:100%;max-width:400px;box-shadow:0 2px 8px #0000001a;color:var(--ion-text-color, #000000)}.datetime-container[_ngcontent-%COMP%]   .calendar-datetime[_ngcontent-%COMP%]     *{color:var(--ion-text-color, #000000)!important}.datetime-container[_ngcontent-%COMP%]   .calendar-datetime[_ngcontent-%COMP%]     .calendar-day{background:var(--ion-color-light, #f4f5f8);color:var(--ion-text-color, #000000);border-radius:8px;transition:all .2s}.datetime-container[_ngcontent-%COMP%]   .calendar-datetime[_ngcontent-%COMP%]     .calendar-day:hover{background:var(--ion-color-primary-tint, #e0e7ff)}.datetime-container[_ngcontent-%COMP%]   .calendar-datetime[_ngcontent-%COMP%]     .calendar-day-selected{background:var(--ion-color-primary, #3880ff)!important;color:#fff!important}.datetime-container[_ngcontent-%COMP%]   .calendar-datetime[_ngcontent-%COMP%]     .calendar-day-today{border:2px solid var(--ion-color-primary, #3880ff)}.datetime-container[_ngcontent-%COMP%]   .time-section[_ngcontent-%COMP%]{width:100%;max-width:400px;display:flex;flex-direction:column;gap:12px;background:var(--ion-background-color, #ffffff);padding:16px;border-radius:12px;box-shadow:0 2px 8px #0000001a}.datetime-container[_ngcontent-%COMP%]   .time-section[_ngcontent-%COMP%]   .time-label[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:var(--ion-color-primary);text-align:center;margin-bottom:8px}.datetime-container[_ngcontent-%COMP%]   .time-section[_ngcontent-%COMP%]   .time-datetime[_ngcontent-%COMP%]{--background: var(--ion-background-color, #ffffff);--background-rgb: 255, 255, 255;background:var(--ion-background-color, #ffffff);border-radius:12px;padding:16px;width:100%;color:var(--ion-text-color, #000000)}.button-container[_ngcontent-%COMP%]{padding:16px 0;display:flex;flex-direction:column;gap:12px;background:var(--ion-background-color, #ffffff)}.button-container[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{margin:0;height:48px;font-weight:500;text-transform:none}.button-container[_ngcontent-%COMP%]   .action-button.confirm-button[_ngcontent-%COMP%]{--box-shadow: 0 4px 8px rgba(0, 0, 0, .15)}.button-container[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:8px}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--min-height: 56px;--background: var(--ion-color-primary);--color: white}ion-header[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#fff}ion-header[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--color: white}ion-content[_ngcontent-%COMP%]{--background: var(--ion-background-color, #ffffff);background:var(--ion-background-color, #ffffff)}@media (max-width: 767px){.datetime-container[_ngcontent-%COMP%]{padding:12px;min-height:250px;gap:16px}.datetime-container[_ngcontent-%COMP%]   .calendar-datetime[_ngcontent-%COMP%], .datetime-container[_ngcontent-%COMP%]   .time-section[_ngcontent-%COMP%]{padding:12px}.button-container[_ngcontent-%COMP%]{padding:12px 0;gap:10px}.button-container[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{height:44px;font-size:15px}}@media (min-width: 768px){.datetime-container[_ngcontent-%COMP%]{min-height:350px;gap:24px}.datetime-container[_ngcontent-%COMP%]   .calendar-datetime[_ngcontent-%COMP%], .datetime-container[_ngcontent-%COMP%]   .time-section[_ngcontent-%COMP%]{max-width:500px;padding:20px}}"]})}}return a})();var V=d(5032),X=d(2767),H=d(2464),$=d(3943);function L(a,g){if(1&a){const t=o.RV6();o.j41(0,"ion-button",44),o.bIt("click",function(){o.eBV(t);const n=o.XpG(2);return o.Njj(n.delete())}),o.nrm(1,"ion-icon",46),o.k0s()}}function W(a,g){if(1&a){const t=o.RV6();o.j41(0,"div",42),o.DNE(1,L,2,0,"ion-button",43),o.j41(2,"ion-button",44),o.bIt("click",function(){o.eBV(t);const n=o.XpG();return o.Njj(n.seleccion())}),o.nrm(3,"ion-icon",45),o.k0s()()}if(2&a){const t=o.XpG();o.R7$(),o.Y8G("ngIf",t.seleccionando)}}function Q(a,g){if(1&a){const t=o.RV6();o.j41(0,"ion-row",4)(1,"ion-col",5)(2,"ion-label",6),o.EFF(3,"Tipo Comprobante "),o.j41(4,"span",7),o.EFF(5,"*"),o.k0s()(),o.j41(6,"ion-item",8),o.bIt("click",function(){o.eBV(t);const n=o.XpG();return o.Njj(n.setTipoComprobante())}),o.j41(7,"ion-input",47),o.mxI("ngModelChange",function(n){o.eBV(t);const i=o.XpG();return o.DH7(i.tipoComprobanteSeleccionado,n)||(i.tipoComprobanteSeleccionado=n),o.Njj(n)}),o.k0s(),o.nrm(8,"ion-icon",10),o.k0s()()()}if(2&a){const t=o.XpG();o.R7$(7),o.R50("ngModel",t.tipoComprobanteSeleccionado),o.Y8G("readonly",!0)}}function Z(a,g){if(1&a){const t=o.RV6();o.qex(0),o.j41(1,"ion-row",4)(2,"ion-col",5)(3,"ion-label",6),o.EFF(4,"Timbrado"),o.k0s(),o.j41(5,"ion-item",14)(6,"ion-input",48),o.mxI("ngModelChange",function(n){o.eBV(t);const i=o.XpG();return o.DH7(i.iJmjCompra.timbrado,n)||(i.iJmjCompra.timbrado=n),o.Njj(n)}),o.k0s()()()(),o.j41(7,"ion-row",4)(8,"ion-col",5)(9,"div",49)(10,"div",50),o.EFF(11,"Datos de Factura"),o.k0s(),o.j41(12,"div",51)(13,"div",52)(14,"ion-label",53),o.EFF(15,"Sucursal"),o.k0s(),o.j41(16,"ion-item",14)(17,"ion-input",54),o.mxI("ngModelChange",function(n){o.eBV(t);const i=o.XpG();return o.DH7(i.codEstablecimiento,n)||(i.codEstablecimiento=n),o.Njj(n)}),o.bIt("ionChange",function(){o.eBV(t);const n=o.XpG();return o.Njj(n.setFacturaSet())}),o.k0s()()(),o.j41(18,"div",52)(19,"ion-label",53),o.EFF(20,"Punto Exp."),o.k0s(),o.j41(21,"ion-item",14)(22,"ion-input",54),o.mxI("ngModelChange",function(n){o.eBV(t);const i=o.XpG();return o.DH7(i.punExpedicion,n)||(i.punExpedicion=n),o.Njj(n)}),o.bIt("ionChange",function(){o.eBV(t);const n=o.XpG();return o.Njj(n.setFacturaSet())}),o.k0s()()(),o.j41(23,"div",52)(24,"ion-label",53),o.EFF(25,"Nro. Doc"),o.k0s(),o.j41(26,"ion-item",14)(27,"ion-input",55),o.mxI("ngModelChange",function(n){o.eBV(t);const i=o.XpG();return o.DH7(i.nroDocumento,n)||(i.nroDocumento=n),o.Njj(n)}),o.bIt("ionChange",function(){o.eBV(t);const n=o.XpG();return o.Njj(n.setFacturaSet())}),o.k0s()()()()()()(),o.j41(28,"ion-row",4)(29,"ion-col",5)(30,"ion-label",6),o.EFF(31,"Nro. Factura"),o.k0s(),o.j41(32,"ion-item",56)(33,"ion-input",57),o.mxI("ngModelChange",function(n){o.eBV(t);const i=o.XpG();return o.DH7(i.iJmjCompra.nroFactura,n)||(i.iJmjCompra.nroFactura=n),o.Njj(n)}),o.k0s()()()(),o.bVm()}if(2&a){const t=o.XpG();o.R7$(6),o.R50("ngModel",t.iJmjCompra.timbrado),o.Y8G("readonly",!1),o.R7$(11),o.R50("ngModel",t.codEstablecimiento),o.Y8G("readonly",!1),o.R7$(5),o.R50("ngModel",t.punExpedicion),o.Y8G("readonly",!1),o.R7$(5),o.R50("ngModel",t.nroDocumento),o.Y8G("readonly",!1),o.R7$(6),o.R50("ngModel",t.iJmjCompra.nroFactura),o.Y8G("readonly",!0)}}function q(a,g){1&a&&(o.j41(0,"ion-row",58)(1,"ion-col",59),o.nrm(2,"ion-spinner",60),o.k0s()())}function K(a,g){if(1&a){const t=o.RV6();o.j41(0,"ion-checkbox",71),o.mxI("ngModelChange",function(n){o.eBV(t);const i=o.XpG().index,c=o.XpG();return o.DH7(c.seleccionado[i],n)||(c.seleccionado[i]=n),o.Njj(n)}),o.bIt("click",function(n){return o.eBV(t),o.Njj(n.stopPropagation())}),o.k0s()}if(2&a){const t=o.XpG().index,e=o.XpG();o.R50("ngModel",e.seleccionado[t])}}function oo(a,g){if(1&a){const t=o.RV6();o.j41(0,"ion-item",61),o.bIt("click",function(){const n=o.eBV(t).$implicit,i=o.XpG();return o.Njj(i.openModalProducto(n))}),o.DNE(1,K,1,1,"ion-checkbox",62),o.j41(2,"ion-label",63)(3,"div",64),o.EFF(4),o.k0s(),o.j41(5,"div",65)(6,"span",66),o.EFF(7),o.nI1(8,"number"),o.k0s(),o.j41(9,"span",66),o.EFF(10),o.nI1(11,"number"),o.k0s()()(),o.j41(12,"div",67)(13,"div",68)(14,"div",69),o.EFF(15),o.nI1(16,"number"),o.k0s(),o.j41(17,"div",69),o.EFF(18),o.nI1(19,"number"),o.k0s()(),o.j41(20,"div",70)(21,"strong"),o.EFF(22),o.nI1(23,"number"),o.k0s()()()()}if(2&a){const t=g.$implicit,e=o.XpG();o.R7$(),o.Y8G("ngIf",e.seleccionando),o.R7$(3),o.JRh(t.descripcionArticulo),o.R7$(3),o.SpI("Cant: ",o.i5U(8,7,t.cantidad,"1.0-0"),""),o.R7$(3),o.SpI("P.U: ",o.i5U(11,10,t.precioUnitario,"1.0-0"),""),o.R7$(5),o.JRh(o.i5U(16,13,t.cantidad,"1.0-0")),o.R7$(3),o.JRh(o.i5U(19,16,t.precioUnitario,"1.0-0")),o.R7$(4),o.JRh(o.i5U(23,19,t.precioUnitario*t.cantidad,"1.0-0"))}}const to=[{path:":tipoGasto",component:(()=>{class a{constructor(t,e,n,i,c,l,x,h,_,b,O,J){this.alertSvc=t,this.alertCtrl=e,this.actionSheetCtrl=n,this.route=i,this.jmjModoConexionService=c,this.loaderSvc=l,this.apiSvc=x,this.navCtrl=h,this.authSvc=_,this.jmjTomarDatosGlobales=b,this.modalCtrl=O,this.jmjStorageService=J,this.tipoComprobanteSeleccionado="",this.options=P.c.calendarOptions,this.loading=!1,this.tipoFactura="G",this.tipoContacto="Proveedor",this.seleccionado={},this.seleccionando=!1,this.facturacion=null,this.fecOperacion=m().format("DD/MM/YYYY")+" "+m().format("HH:mm"),this.abriendoModalProveedor=!1,this.bloqueoTemporalClick=!1,this.tipoGasto=this.route.snapshot.paramMap.get("tipoGasto"),this.inicializar()}ngOnInit(){this.cargarTiposDocumentos(),this.calcularTotal()}cargarTiposDocumentos(){this.apiSvc.post("/tipos_documentos",{idubi:P.c.idubi,cantfilas:10,filadesde:1,whereadic:"tipo_documento <> 0",orderby:""}).subscribe({next:e=>{if(e&&e.data&&Array.isArray(e.data)){if(this.iJmjTiposComprobante=e.data.map(n=>({id:n.tipo_documento.toString(),nombre:n.descripcion})),this.iJmjCompra.tipoComprobante){const n=this.iJmjTiposComprobante.find(i=>i.id===this.iJmjCompra.tipoComprobante);n&&(this.tipoComprobanteSeleccionado=n.nombre)}}else this.iJmjTiposComprobante=[]},error:e=>{console.error("Error al cargar tipos de documentos:",e),this.alertSvc.error("Error al cargar los tipos de comprobante"),this.iJmjTiposComprobante=[]}})}setTipoComprobante(){var t=this;return(0,u.A)(function*(){if(0===t.iJmjTiposComprobante.length)return void t.alertSvc.info("No hay tipos de comprobante disponibles");const e=t.iJmjTiposComprobante.map(i=>({text:i.nombre,handler:()=>{t.iJmjCompra.tipoComprobante=i.id,t.tipoComprobanteSeleccionado=i.nombre}}));e.push({text:"Cancelar",role:"cancel"}),yield(yield t.actionSheetCtrl.create({header:"Seleccionar Tipo Comprobante",buttons:e})).present()})()}ionViewWillEnter(){this.iJmjBilletera=this.jmjTomarDatosGlobales.getBilletera(),this.saldo=this.iJmjBilletera?this.iJmjBilletera.saldo:0,this.titulo="Gastos "+this.tipoGasto+". Saldo Gs."+this.saldo.toLocaleString().replace(/\,/g,".")}inicializar(){this.iJmjProductoMpArray=[],this.iJmjPagodetCompras=[],this.inicializarProducto(),this.iJmjCompra={codigoProveedor:null,codigoTransaccion:null,nroDoc:null,estado:null,usuario:null,fechaHoraFactura:null,precioUnitario:null,facturaDetalle:this.iJmjProductoMpArray,tipoFactura:"G",tipoComprobante:"SIN FACTURA"===this.tipoGasto?"00":null,facturacion:this.facturacion,timbrado:null,nroRecibo:null,nroFactura:null,talonario:null,offLine:this.jmjModoConexionService.getModoOffLine(),comentario:null,valores:this.iJmjPagodetCompras},this.iJmjCompras=[],"SIN FACTURA"===this.tipoGasto&&(this.iJmjPagoProveedor={id:null,nombre:"",tipoDocumento:"",nroDocumento:"",nombre_factura:"",ruc_factura:"",codigoPrestamo:null,montoPrestamo:0,saldoPrestamo:0,montoCuotaAcordado:0,detallePrestamo:null,detalleAprobaciones:null},this.iJmjCompra.codigoProveedor=this.iJmjPagoProveedor.id,this.iJmjCompra.nombreProveedor=this.iJmjPagoProveedor.nombre,this.iJmjCompra.nroDocProveedor=this.iJmjPagoProveedor.id)}inicializarProducto(){this.iJmjProductoMp={id:this.iJmjProductoMpArray.length+1,codigoArticulo:null,descripcionArticulo:null,precioUnitario:0,lote:null,pesoBruto:0,vencimientoLote:null,tara:0,cantidad:1,envaseComprador:null,densidad:null,solubilidad:null,fucsina:null,facturacion:null,parcela:null,aprovisionamientoQm:null,claveControl:null}}seleccion(){this.seleccionado={},this.seleccionando=!this.seleccionando}setFacturaSet(){this.iJmjCompra.nroFactura=(this.codEstablecimiento||0).toString().padStart(3,"0")+"-"+(this.punExpedicion||0).toString().padStart(3,"0")+"-"+(this.nroDocumento||0).toString().padStart(7,"0")}openModalProducto(t){var e=this;return(0,u.A)(function*(){if(e.seleccionando)return;let n=!1;null==t?(e.inicializarProducto(),t=e.iJmjProductoMp):n=!0;const i=yield e.modalCtrl.create({component:B,componentProps:{iJmjProductoMp:t,tipoFactura:e.iJmjCompra.tipoFactura,talonarioRecibo:null,tipoGasto:e.tipoGasto}});yield i.present();const{data:c}=yield i.onDidDismiss();c&&c.success&&(n?t=c.data:e.iJmjProductoMpArray.push(c.data)),e.calcularTotal()})()}setProveedor(){var t=this;return(0,u.A)(function*(){if(console.log("[JmjGasto] setProveedor - INICIO"),console.log("[JmjGasto] setProveedor - abriendoModalProveedor:",t.abriendoModalProveedor),console.log("[JmjGasto] setProveedor - bloqueoTemporalClick:",t.bloqueoTemporalClick),t.abriendoModalProveedor)console.log("[JmjGasto] setProveedor - SALIENDO: Modal ya se est\xe1 abriendo");else if(t.bloqueoTemporalClick)console.log("[JmjGasto] setProveedor - SALIENDO: Bloqueo temporal activo (evita reapertura despu\xe9s de seleccionar)");else{t.abriendoModalProveedor=!0,console.log("[JmjGasto] setProveedor - tipoContacto:",t.tipoContacto);try{const e=yield t.modalCtrl.create({component:Y.c,componentProps:{tipoContacto:t.tipoContacto}});console.log("[JmjGasto] setProveedor - Modal creado, presentando..."),yield e.present();const{data:n}=yield e.onDidDismiss();console.log("[JmjGasto] setProveedor - Modal cerrado, data recibida:",n),n?(console.log("[JmjGasto] setProveedor - Asignando datos del proveedor"),t.iJmjPagoProveedor={id:n.codigoProveedor,nombre:n.nombre,tipoDocumento:"CI",nroDocumento:n.codigoProveedor,nombre_factura:n.nombre,ruc_factura:n.nombre,codigoPrestamo:n.codigoPrestamo,montoPrestamo:n.montoPrestamo,saldoPrestamo:n.saldoPrestamo,montoCuotaAcordado:n.montoCuotaAcordado,detallePrestamo:n.detallePrestamo,detalleAprobaciones:n.detalleAprobaciones},t.iJmjCompra.codigoProveedor=t.iJmjPagoProveedor.id,t.iJmjCompra.nombreProveedor=t.iJmjPagoProveedor.nombre,t.iJmjCompra.nroDocProveedor=t.iJmjPagoProveedor.id,console.log("[JmjGasto] setProveedor - Proveedor asignado:",t.iJmjCompra.nombreProveedor),t.bloqueoTemporalClick=!0,setTimeout(()=>{t.bloqueoTemporalClick=!1,console.log("[JmjGasto] setProveedor - Bloqueo temporal desactivado")},500)):console.log("[JmjGasto] setProveedor - No se recibi\xf3 data del modal")}catch(e){console.error("[JmjGasto] setProveedor - ERROR:",e)}finally{t.abriendoModalProveedor=!1,console.log("[JmjGasto] setProveedor - FIN, abriendoModalProveedor resetado a false")}}})()}delete(){var t=this;return(0,u.A)(function*(){const n=Object.keys(t.seleccionado).filter(i=>t.seleccionado[i]).map(i=>+i);for(;n.length;)t.iJmjProductoMpArray.splice(n.pop(),1);t.seleccionando=!1,t.calcularTotal()})()}calcularTotal(){this.iJmjCompra.precioUnitario=Number(this.iJmjCompra.facturaDetalle.reduce((t,e)=>Number(t)+(Number(e.cantidad*e.precioUnitario)||0),0)),this.iJmjCompra.precioUnitario=Number(this.iJmjCompra.precioUnitario.toFixed(0)),this.saldoNvo=this.saldo-this.iJmjCompra.precioUnitario}validacionesCritico(){var t=this;return(0,u.A)(function*(){let e=null;if(t.iJmjProductoMp.aprovisionamientoQm&&"0001"===t.iJmjProductoMp.claveControl){let n;n=t.iJmjPagoProveedor.detalleAprobaciones.indexOf(t.iJmjPagoProveedor.detalleAprobaciones.find(i=>i.codigoArticulo===t.iJmjProductoMp.codigoArticulo)),-1!==n?t.iJmjPagoProveedor.detalleAprobaciones[n].fechaLiberacionHasta<t.fecOperacion||(e="El material es cr\xedtico y est\xe1 asignado al proveedor pero su fecha expir\xf3"):e="El material es cr\xedtico y no est\xe1 asignado al proveedor"}return!e||(t.alertSvc.error(e),!1)})()}validaciones(){var t=this;return(0,u.A)(function*(){return t.saldoNvo<0&&t.alertSvc.info("Le falta Gs."+(-1*t.saldoNvo).toLocaleString().replace(/\,/g,".")+" para realizar la transaccion si ser\xe1 en EFECTIVO."),!0})()}submit(){var t=this;return(0,u.A)(function*(){if(!(yield t.validaciones())||!(yield t.validacionesCritico()))return;t.loading=!0;let e=0,n=0;const i=yield t.jmjStorageService.getData("CAJA_DATA");if(i&&"undefined"!==i){const s=JSON.parse(i);e=s.habilitacion||0,n=s.caja||0}const l=t.authSvc.getUserInfo().usuario,x=t.iJmjCompra.codigoProveedor?parseInt(t.iJmjCompra.codigoProveedor):0;let h=m(t.fecOperacion,"DD/MM/YYYY HH:mm").format("YYYYMMDD");(!h||"Invalid date"===h)&&(h=m().format("YYYYMMDD"));const _="SIN FACTURA"===t.tipoGasto;let b=null;if(_)b=h;else if(t.iJmjCompra.fechaHoraFactura){const s=m(t.iJmjCompra.fechaHoraFactura,"DD/MM/YYYY HH:mm");s.isValid()&&(b=s.format("YYYYMMDD"))}const O=t.iJmjProductoMpArray.map(s=>({concepto:s.codigoArticulo?parseInt(s.codigoArticulo):0,cantidad:s.cantidad||0,precio_unitario:s.precioUnitario||0})),J=_?"00000000":t.iJmjCompra.timbrado?t.iJmjCompra.timbrado.toString():"",ao={habilitacion:e,caja:n,tipo_gasto:_?"SINF":"CONF",fecha:h,concepto:t.iJmjProductoMpArray.length>0&&t.iJmjProductoMpArray[0].codigoArticulo?parseInt(t.iJmjProductoMpArray[0].codigoArticulo):0,persona:x,importe:t.iJmjCompra.precioUnitario||0,observacion:t.iJmjCompra.comentario||"",usuario_insercion:l,sucursal:t.codEstablecimiento||0,forma_pago:"E",tipo_comprobante:t.iJmjCompra.tipoComprobante?parseInt(t.iJmjCompra.tipoComprobante):0,nro_compra:_?null:t.iJmjCompra.nroFactura?t.iJmjCompra.nroFactura.replace(/-/g,""):"",fecha_comprobante:b,nro_timbrado:J,monto_grav_05:0,fact_virtual:"N",retencion:"N",facturaDetalle:O};t.jmjModoConexionService.getModoOffLine()?(t.iJmjCompra={codigoProveedor:t.iJmjCompra.codigoProveedor,codigoTransaccion:t.jmjTomarDatosGlobales.genUuid(),nroDoc:null,estado:"A",usuario:l,fechaHoraFactura:t.fecOperacion,precioUnitario:t.iJmjCompra.precioUnitario,facturaDetalle:t.iJmjProductoMpArray,tipoFactura:"G",tipoComprobante:t.iJmjCompra.tipoComprobante,facturacion:t.facturacion,timbrado:t.iJmjCompra.timbrado,nroRecibo:t.iJmjCompra.nroRecibo,nroFactura:t.iJmjCompra.nroFactura,talonario:null,offLine:!0,comentario:t.iJmjCompra.comentario,valores:t.iJmjPagodetCompras},t.iJmjBilletera&&(t.iJmjBilletera.saldo=t.saldoNvo,t.saldo=t.saldoNvo,t.titulo="Gastos "+t.tipoGasto+". Saldo Gs."+t.saldo.toLocaleString().replace(/\,/g,".")),t.inicializar(),t.calcularTotal(),t.alertSvc.success("Gasto guardado para sincronizaci\xf3n offline")):(yield t.loaderSvc.show("Grabando compra.."),t.apiSvc.post("/facturas/factura",ao).subscribe({next:s=>{t.loading=!1,t.loaderSvc.stop(),t.alertSvc.success("Grabaci\xf3n exitosa!"),t.iJmjBilletera&&(t.iJmjBilletera.saldo=t.saldoNvo,t.saldo=t.saldoNvo,t.titulo="Gastos "+t.tipoGasto+". Saldo Gs."+t.saldo.toLocaleString().replace(/\,/g,".")),t.inicializar(),t.calcularTotal()},error:s=>{let C="";t.loading=!1,t.loaderSvc.stop(),console.log("Error completo:",s),C=s&&s.error?s.error.message?s.error.message:s.error.data&&s.error.data.errors?s.error.data.errors[0]:s.error.data?JSON.stringify(s.error.data):JSON.stringify(s.error):"Error inesperado. Transacci\xf3n fallida",t.alertSvc.error(C)}}))})()}pagar(){var t=this;return(0,u.A)(function*(){t.iJmjCompras.push(t.iJmjCompra);const e=yield t.modalCtrl.create({component:N.J,componentProps:{proveedor:t.iJmjPagoProveedor,facturas:t.iJmjCompras,totalAmountGS:t.iJmjCompras[0].precioUnitario,tipoFactura:t.tipoFactura}});yield e.present();const{data:n}=yield e.onDidDismiss();if(n&&n.success)console.log("Pago exitoso"),t.alertSvc.success("Pago Exitoso!"),t.navCtrl.navigateBack("/jmj-home");else{if(n){let i="";i=t.jmjModoConexionService.getModoOffLine()?n.success?n.imprimioTicket?"":"Impresi\xf3n cancelada por el usuario":"TODO el proceso fue cancelado":n.success?"Pago fallido":"El gasto se grabo exitosamente pero el Pago fue cancelado por el usuario. Vaya a Pagos Realizados para terminar la operacion.",t.presentAlertMultipleButtons(i)}else t.alertSvc.error("Pago Fallido!");console.log("Pago fallido"),t.navCtrl.navigateBack("/jmj-home")}})()}close(){this.navCtrl.navigateBack("/jmj-home")}openDatePicker(){var t=this;return(0,u.A)(function*(){const e=yield t.modalCtrl.create({component:U,cssClass:"li-ionic4-datePicker",componentProps:{objConfig:t.options}});yield e.present(),e.onDidDismiss().then(n=>{"Invalid date"!==n.data.date&&(t.fecOperacion=n.data.date)})})()}presentAlertMultipleButtons(t){var e=this;return(0,u.A)(function*(){yield(yield e.alertCtrl.create({header:"Aviso",subHeader:"Pago Incompleto",message:t,buttons:["Entendido"]})).present()})()}static{this.\u0275fac=function(e){return new(e||a)(o.rXU(w.u),o.rXU(r.hG),o.rXU(r.GD),o.rXU(j.nX),o.rXU(X.B),o.rXU(G.Z),o.rXU(y.G),o.rXU(V.q9),o.rXU(H.u),o.rXU(M.C),o.rXU(r.W3),o.rXU($.y))}}static{this.\u0275cmp=o.VBU({type:a,selectors:[["app-jmj-gasto"]],decls:70,vars:16,consts:[[3,"title"],["right","",4,"ngIf"],[1,"form-container"],["class","form-row",4,"ngIf"],[1,"form-row"],["size","12","size-md","11","size-lg","10","size-xl","9"],[1,"field-label-text"],[1,"required"],["lines","none",1,"form-item","clickable",3,"click"],["placeholder","Seleccione un proveedor",1,"form-input","readonly-field",3,"ngModelChange","ngModel","readonly"],["slot","end","name","search-outline",1,"search-icon"],["lines","none",1,"tai-input-only"],["name","fecoperacion","type","text","placeholder","Fecha Operacion",1,"tai-input",3,"ngModelChange","click","ngModel","readonly"],[4,"ngIf"],["lines","none",1,"form-item"],["maxlength","25","placeholder","Ingrese un comentario (opcional)",1,"form-input",3,"ngModelChange","ngModel"],[1,"products-section"],[1,"table-header"],[1,"table-col-concepto"],[1,"table-col-cant","ion-hide-xs-down"],[1,"table-col-punit","ion-hide-xs-down"],[1,"table-col-importe"],["class","loading-row",4,"ngIf"],[1,"products-list"],["class","product-item","lines","inset",3,"click",4,"ngFor","ngForOf"],[1,"total-row"],["size","12","size-md","11","size-lg","10","size-xl","9",1,"ion-text-end"],["lines","none",1,"total-item"],[1,"total-label"],["slot","end",1,"total-amount"],[1,"form-row","fab-row"],[1,"fab-container"],["color","primary",1,"fab-button",3,"click"],["name","add","slot","icon-only"],[1,"footer-container"],["size","12"],[1,"footer-toolbar"],["slot","start",1,"footer-buttons"],["color","primary","expand","block","size","default",1,"footer-button",3,"click","disabled"],["slot","start","name","checkmark-circle"],["color","secondary","expand","block","size","default",1,"footer-button",3,"click"],["slot","start","name","close-circle"],["right",""],[3,"click",4,"ngIf"],[3,"click"],["ios","create-outline","md","create-outline","slot","end",1,"botonescab"],["ios","trash-outline","md","trash-outline","slot","end",1,"botonescab"],["placeholder","Seleccione un tipo de comprobante",1,"form-input","readonly-field",3,"ngModelChange","ngModel","readonly"],["type","number","placeholder","Ingrese el timbrado",1,"form-input",3,"ngModelChange","ngModel","readonly"],[1,"invoice-section-container"],[1,"section-title"],[1,"invoice-fields-container"],[1,"invoice-field-item"],[1,"field-label-small"],["type","tel","maxlength","3","placeholder","000",1,"form-input","form-input-center",3,"ngModelChange","ionChange","ngModel","readonly"],["type","tel","maxlength","7","placeholder","0000000",1,"form-input","form-input-center",3,"ngModelChange","ionChange","ngModel","readonly"],["lines","none",1,"form-item","readonly-item"],["placeholder","Se genera autom\xe1ticamente",1,"form-input","readonly-input",3,"ngModelChange","ngModel","readonly"],[1,"loading-row"],["size","12","size-md","11","size-lg","10","size-xl","9",1,"ion-text-center"],["name","dots"],["lines","inset",1,"product-item",3,"click"],["slot","start",3,"ngModel","ngModelChange","click",4,"ngIf"],[1,"product-label"],[1,"product-name"],[1,"product-details","ion-hide-sm-up"],[1,"detail-item"],["slot","end",1,"product-amounts"],[1,"amount-desktop","ion-hide-xs-down"],[1,"amount-item"],[1,"amount-total"],["slot","start",3,"ngModelChange","click","ngModel"]],template:function(e,n){1&e&&(o.j41(0,"app-header",0),o.DNE(1,W,4,1,"div",1),o.k0s(),o.j41(2,"ion-content")(3,"ion-grid",2),o.DNE(4,Q,9,2,"ion-row",3),o.j41(5,"ion-row",4)(6,"ion-col",5)(7,"ion-label",6),o.EFF(8,"Proveedor "),o.j41(9,"span",7),o.EFF(10,"*"),o.k0s()(),o.j41(11,"ion-item",8),o.bIt("click",function(){return n.setProveedor()}),o.j41(12,"ion-input",9),o.mxI("ngModelChange",function(c){return o.DH7(n.iJmjCompra.nombreProveedor,c)||(n.iJmjCompra.nombreProveedor=c),c}),o.k0s(),o.nrm(13,"ion-icon",10),o.k0s()()(),o.j41(14,"ion-row",4)(15,"ion-col",5)(16,"ion-label",6),o.EFF(17,"Fecha Operaci\xf3n"),o.k0s(),o.j41(18,"ion-item",11)(19,"ion-input",12),o.mxI("ngModelChange",function(c){return o.DH7(n.fecOperacion,c)||(n.fecOperacion=c),c}),o.bIt("click",function(){return n.openDatePicker()}),o.k0s()()()(),o.DNE(20,Z,34,10,"ng-container",13),o.j41(21,"ion-row",4)(22,"ion-col",5)(23,"ion-label",6),o.EFF(24,"Comentario"),o.k0s(),o.j41(25,"ion-item",14)(26,"ion-input",15),o.mxI("ngModelChange",function(c){return o.DH7(n.iJmjCompra.comentario,c)||(n.iJmjCompra.comentario=c),c}),o.k0s()()()(),o.j41(27,"ion-row",16)(28,"ion-col",5)(29,"div",17)(30,"div",18),o.EFF(31,"Concepto"),o.k0s(),o.j41(32,"div",19),o.EFF(33,"Cant."),o.k0s(),o.j41(34,"div",20),o.EFF(35,"P. Unit."),o.k0s(),o.j41(36,"div",21),o.EFF(37,"Importe"),o.k0s()()()(),o.DNE(38,q,3,0,"ion-row",22),o.j41(39,"ion-row")(40,"ion-col",5)(41,"ion-list",23),o.DNE(42,oo,24,22,"ion-item",24),o.k0s()()(),o.j41(43,"ion-row",25)(44,"ion-col",26)(45,"ion-item",27)(46,"ion-label",28)(47,"h2"),o.EFF(48,"TOTAL"),o.k0s()(),o.j41(49,"div",29)(50,"h2"),o.EFF(51),o.nI1(52,"number"),o.k0s()()()()(),o.j41(53,"ion-row",30)(54,"ion-col",5)(55,"div",31)(56,"ion-button",32),o.bIt("click",function(){return n.openModalProducto(null)}),o.nrm(57,"ion-icon",33),o.k0s()()()()()(),o.j41(58,"ion-footer")(59,"ion-grid",34)(60,"ion-row")(61,"ion-col",35)(62,"ion-toolbar",36)(63,"ion-buttons",37)(64,"ion-button",38),o.bIt("click",function(){return n.submit()}),o.nrm(65,"ion-icon",39),o.EFF(66," Grabar "),o.k0s(),o.j41(67,"ion-button",40),o.bIt("click",function(){return n.close()}),o.nrm(68,"ion-icon",41),o.EFF(69," Cancelar "),o.k0s()()()()()()()),2&e&&(o.Y8G("title",n.titulo),o.R7$(),o.Y8G("ngIf",n.iJmjCompra.facturaDetalle.length>0),o.R7$(3),o.Y8G("ngIf","SIN FACTURA"!==n.tipoGasto),o.R7$(8),o.R50("ngModel",n.iJmjCompra.nombreProveedor),o.Y8G("readonly",!0),o.R7$(7),o.R50("ngModel",n.fecOperacion),o.Y8G("readonly",!0),o.R7$(),o.Y8G("ngIf","CON FACTURA"===n.tipoGasto),o.R7$(6),o.R50("ngModel",n.iJmjCompra.comentario),o.R7$(12),o.Y8G("ngIf",n.loading),o.R7$(4),o.Y8G("ngForOf",n.iJmjProductoMpArray),o.R7$(9),o.JRh(o.i5U(52,13,n.iJmjCompra.precioUnitario,"1.0-0")),o.R7$(13),o.Y8G("disabled",0==n.iJmjCompra.precioUnitario||n.seleccionando||null==n.iJmjCompra.tipoComprobante))},dependencies:[f.Sq,f.bT,p.BC,p.tU,p.vS,r.Jm,r.QW,r.eY,r.hU,r.W9,r.M0,r.lO,r.iq,r.$w,r.uz,r.he,r.nf,r.ln,r.w2,r.ai,r.hB,r.su,r.Gw,v.l,f.QX],styles:[".botonescab[_ngcontent-%COMP%]{color:#fff}.form-container[_ngcontent-%COMP%]{padding:16px;background:#fff}@media (max-width: 575px){.form-container[_ngcontent-%COMP%]{padding:12px}}@media (min-width: 768px){.form-container[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto}}.form-row[_ngcontent-%COMP%]{margin-bottom:16px}@media (max-width: 575px){.form-row[_ngcontent-%COMP%]{margin-bottom:8px}}@media (min-width: 768px){.form-row[_ngcontent-%COMP%]{margin-bottom:24px}}.field-label-text[_ngcontent-%COMP%]{display:block;font-size:15px;font-weight:700;color:#000;margin-bottom:16px;padding:0}.field-label-text[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:var(--ion-color-danger);font-weight:700}@media (max-width: 575px){.field-label-text[_ngcontent-%COMP%]{display:none}}@media (min-width: 768px){.field-label-text[_ngcontent-%COMP%]{font-size:16px;margin-bottom:24px}}.field-label-small[_ngcontent-%COMP%]{display:block;font-size:13px;font-weight:700;color:#000;margin-bottom:12px;padding:0;text-align:center}@media (max-width: 575px){.field-label-small[_ngcontent-%COMP%]{display:none}}@media (min-width: 768px){.field-label-small[_ngcontent-%COMP%]{font-size:14px;margin-bottom:16px}}.field-title[_ngcontent-%COMP%]{background:var(--ion-color-success, #2dd36f);color:#fff;padding:12px 16px;font-size:14px;font-weight:600;border-radius:8px;margin-bottom:12px}.field-title[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#fff;font-weight:700}@media (min-width: 768px){.field-title[_ngcontent-%COMP%]{font-size:15px;padding:12px 16px;margin-bottom:16px}}.invoice-section-container[_ngcontent-%COMP%]{width:100%;background:#fff;border:1px solid #e0e0e0;border-radius:8px;margin:24px 0 16px;overflow:hidden}@media (max-width: 575px){.invoice-section-container[_ngcontent-%COMP%]{margin:12px 0 8px}}.section-title[_ngcontent-%COMP%]{background:var(--ion-color-success, #2dd36f);color:#fff;padding:16px;font-size:15px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;border-radius:0;margin:0;width:100%}@media (max-width: 575px){.section-title[_ngcontent-%COMP%]{padding:12px;font-size:13px}}.form-item[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0;--inner-padding-end: 0;--inner-padding-start: 0;--min-height: auto;margin:0;border-radius:8px;background:#fff;border:1px solid #e0e0e0}.form-item.clickable[_ngcontent-%COMP%]{cursor:pointer}.form-item.clickable[_ngcontent-%COMP%]:active{background:#f4f5f8}.form-input[_ngcontent-%COMP%]{font-size:16px;min-height:48px;padding:12px 16px;background:#fff!important;color:#000!important;border:none;width:100%}@media (min-width: 768px){.form-input[_ngcontent-%COMP%]{font-size:15px;min-height:44px}}.form-input[_ngcontent-%COMP%]::placeholder{color:#999!important;opacity:1;font-weight:400}.form-input[readonly][_ngcontent-%COMP%]{background:#f4f5f8!important;color:#666!important;cursor:pointer}.form-input.form-input-center[_ngcontent-%COMP%]{text-align:center}.form-select[_ngcontent-%COMP%]{font-size:16px;min-height:48px;padding:12px 16px;background:#fff!important;color:#000!important;border:none;width:100%}@media (min-width: 768px){.form-select[_ngcontent-%COMP%]{font-size:15px;min-height:44px}}.readonly-field[_ngcontent-%COMP%]{background:#f4f5f8!important;color:#666!important}.readonly-item[_ngcontent-%COMP%]{background:#f4f5f8}.readonly-item[_ngcontent-%COMP%]   .readonly-input[_ngcontent-%COMP%]{background:#f4f5f8!important;color:#666!important}.tai-input-only[_ngcontent-%COMP%]{margin-top:0;--padding-top: 0px !important;--padding-bottom: 0px !important;border-radius:8px;border:1px solid #e0e0e0;background:#fff}.tai-input[_ngcontent-%COMP%]{font-size:16px;min-height:48px;padding:12px 16px;border-radius:0;background:#fff!important;color:#000!important;border:none}@media (min-width: 768px){.tai-input[_ngcontent-%COMP%]{font-size:15px;min-height:44px}}.tai-input[_ngcontent-%COMP%]::placeholder{color:#999!important;opacity:1;font-weight:400}.search-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-size:20px;margin-left:12px}.invoice-fields-container[_ngcontent-%COMP%]{display:flex;gap:12px;padding:16px;background:#fff;border:none;border-top:none;border-radius:0;margin:0;width:100%}@media (max-width: 575px){.invoice-fields-container[_ngcontent-%COMP%]{gap:8px;padding:8px}}@media (min-width: 768px){.invoice-fields-container[_ngcontent-%COMP%]{gap:16px;padding:16px 24px}}.invoice-field-item[_ngcontent-%COMP%]{flex:1;min-width:0;display:flex;flex-direction:column;align-items:stretch}.invoice-field-item[_ngcontent-%COMP%]   .field-label-small[_ngcontent-%COMP%]{width:100%;text-align:center}.invoice-field-item[_ngcontent-%COMP%]   .form-item-invoice[_ngcontent-%COMP%]{width:100%;border-radius:8px}.invoice-field-item[_ngcontent-%COMP%]   .form-item-invoice[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{width:100%}@media (max-width: 575px){.invoice-field-item[_ngcontent-%COMP%]{flex:1 1 30%}}@media (min-width: 576px){.invoice-field-item[_ngcontent-%COMP%]:nth-child(3){flex:2}}.products-section[_ngcontent-%COMP%]{margin-top:32px;margin-bottom:16px}@media (max-width: 575px){.products-section[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:8px}}@media (min-width: 768px){.products-section[_ngcontent-%COMP%]{margin-bottom:24px}}.table-header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px;background:var(--ion-color-success, #2dd36f);color:#fff;font-weight:600;font-size:15px;text-transform:uppercase;letter-spacing:.5px;border-radius:8px 8px 0 0;margin-bottom:0}@media (min-width: 768px){.table-header[_ngcontent-%COMP%]{font-size:16px;padding:16px 24px}}.table-header[_ngcontent-%COMP%]   .table-col-concepto[_ngcontent-%COMP%]{flex:1;text-align:start}.table-header[_ngcontent-%COMP%]   .table-col-cant[_ngcontent-%COMP%]{width:80px;text-align:center}.table-header[_ngcontent-%COMP%]   .table-col-punit[_ngcontent-%COMP%]{width:100px;text-align:center}.table-header[_ngcontent-%COMP%]   .table-col-importe[_ngcontent-%COMP%]{width:100px;text-align:end}.loading-row[_ngcontent-%COMP%]{padding:32px}.products-list[_ngcontent-%COMP%]{background:#fff;border-radius:0 0 8px 8px;margin:0;padding:0;border:1px solid #e0e0e0;border-top:none}.product-item[_ngcontent-%COMP%]{--padding-start: $spacing-md;--padding-end: $spacing-md;--inner-padding-start: $spacing-md;--inner-padding-end: $spacing-md;--min-height: auto;padding:16px;cursor:pointer;border-bottom:1px solid #e0e0e0}.product-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.product-item[_ngcontent-%COMP%]:active{background:#f4f5f8}@media (min-width: 768px){.product-item[_ngcontent-%COMP%]{padding:16px 24px}}.product-item[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%]{margin-right:16px}.product-label[_ngcontent-%COMP%]{flex:1;margin:0}.product-name[_ngcontent-%COMP%]{font-size:15px;font-weight:700;color:#000;margin-bottom:8px}@media (min-width: 768px){.product-name[_ngcontent-%COMP%]{font-size:16px}}.product-details[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:12px;margin-top:8px}.product-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{font-size:12px;color:#666;background:#f4f5f8;padding:2px 8px;border-radius:4px}.product-amounts[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}@media (max-width: 767px){.product-amounts[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-end;gap:8px}}.amount-desktop[_ngcontent-%COMP%]{display:flex;gap:16px}@media (max-width: 767px){.amount-desktop[_ngcontent-%COMP%]{display:none}}.amount-item[_ngcontent-%COMP%]{font-size:13px;color:#666;min-width:60px;text-align:center}@media (min-width: 768px){.amount-item[_ngcontent-%COMP%]{font-size:14px;min-width:80px}}.amount-total[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:var(--ion-color-primary);min-width:100px;text-align:right}@media (min-width: 768px){.amount-total[_ngcontent-%COMP%]{font-size:18px}}.total-row[_ngcontent-%COMP%]{margin-top:24px;margin-bottom:16px}@media (max-width: 575px){.total-row[_ngcontent-%COMP%]{margin-top:12px;margin-bottom:8px}}.total-item[_ngcontent-%COMP%]{--padding-start: $spacing-md;--padding-end: $spacing-md;--inner-padding-start: $spacing-md;--inner-padding-end: $spacing-md;background:#fff;border:1px solid #e0e0e0;border-radius:8px;margin:0}@media (min-width: 768px){.total-item[_ngcontent-%COMP%]{--padding-start: $spacing-lg;--padding-end: $spacing-lg;--inner-padding-start: $spacing-lg;--inner-padding-end: $spacing-lg}}.total-label[_ngcontent-%COMP%]{margin:0}.total-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#000;margin:0}@media (min-width: 768px){.total-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px}}.total-amount[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#000;margin:0}@media (min-width: 768px){.total-amount[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px}}ion-footer[_ngcontent-%COMP%]{background:#fff;padding:0}ion-footer[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]{padding:16px;background:#fff;max-width:100%}@media (min-width: 768px){ion-footer[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto}}ion-footer[_ngcontent-%COMP%]   .footer-toolbar[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0;--min-height: auto;padding:12px 0;background:#fff}@media (min-width: 768px){ion-footer[_ngcontent-%COMP%]   .footer-toolbar[_ngcontent-%COMP%]{padding:16px 0}}.footer-buttons[_ngcontent-%COMP%]{display:flex;gap:12px;width:100%}@media (min-width: 768px){.footer-buttons[_ngcontent-%COMP%]{gap:16px;width:auto}}.footer-button[_ngcontent-%COMP%]{flex:1;margin:0;--border-radius: $border-radius;font-weight:600;text-transform:none;height:48px}@media (min-width: 768px){.footer-button[_ngcontent-%COMP%]{flex:0 1 auto;min-width:140px;height:44px}}.footer-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:8px}.footer-button[disabled][_ngcontent-%COMP%]{opacity:.5}.fab-row[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:16px}@media (min-width: 768px){.fab-row[_ngcontent-%COMP%]{margin-top:24px;margin-bottom:24px}}.fab-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;width:100%;padding:0}.fab-button[_ngcontent-%COMP%]{--border-radius: 50%;width:56px;height:56px;margin:0}@media (min-width: 768px){.fab-button[_ngcontent-%COMP%]{width:48px;height:48px}}.fab-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}@media (min-width: 768px){.fab-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 575px){.ion-hide-xs-down[_ngcontent-%COMP%]{display:none!important}}ion-content[_ngcontent-%COMP%]{--background: $color-white;background:#fff}ion-item[_ngcontent-%COMP%]{--background: transparent;background:transparent}"]})}}return a})()}];let no=(()=>{class a{static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275mod=o.$C({type:a})}static{this.\u0275inj=o.G2t({imports:[j.iI.forChild(to),j.iI]})}}return a})();var eo=d(9244);let io=(()=>{class a{static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275mod=o.$C({type:a})}static{this.\u0275inj=o.G2t({imports:[f.MD,p.YN,r.bv,no,eo.Q]})}}return a})()}}]);