"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5189],{5189:(B,m,r)=>{r.r(m),r.d(m,{LoginPageModule:()=>b});var h=r(177),u=r(9417),d=r(1050),i=r(7343),c=r(467),p=r(5312),e=r(4438),f=r(2464),v=r(2130),j=r(2767),M=r(3943),y=r(1527),S=r(5161);const C=["loginForm"];let F=(()=>{class g{constructor(n,s,o,t,l,a,x,P,V){this.authSvc=n,this.apiSvc=s,this.jmjModoConexionService=o,this.jmjStorageService=t,this.alertSvc=l,this.loaderSvc=a,this.alertCtrl=x,this.popoverCtrl=P,this.router=V,this.auth={usuario:"",contrasenha:"",rememberMe:!0},this.version="",this.passwordType="password",this.loading=!1}ngOnInit(){var n=this;return(0,c.A)(function*(){yield n.verificarVersion()})()}ionViewDidEnter(){this.auth={usuario:"",contrasenha:"",rememberMe:!0},this.version=p.c.version}verificarVersion(){return(0,c.A)(function*(){})()}login(){var n=this;return(0,c.A)(function*(){if(n.form.invalid||n.loading)return;const s=yield n.jmjModoConexionService.getModoOffLineStorage();n.jmjModoConexionService.setModoOffLine(s),s?(yield n.authSvc.loginOffLine(n.auth),n.authSvc.isAuthenticated()&&n.router.navigate(["jmj-home"])):(n.loading=!0,yield n.loaderSvc.show(),n.authSvc.login(n.auth).subscribe((0,c.A)(function*(){yield n.loaderSvc.stop(),n.loading=!1,n.router.navigate(["jmj-home"])}),function(){var o=(0,c.A)(function*(t){n.loaderSvc.stop(),n.loading=!1;const l=t.error;l?(console.log("Error desde el backend",l),n.alertSvc.error(t.error.message||"Error de conexi\xf3n!")):n.alertSvc.error("Error desconocido!")});return function(t){return o.apply(this,arguments)}}()))})()}toggleType(){this.passwordType="text"===this.passwordType?"password":"text"}static{this.\u0275fac=function(s){return new(s||g)(e.rXU(f.u),e.rXU(v.G),e.rXU(j.B),e.rXU(M.y),e.rXU(y.u),e.rXU(S.Z),e.rXU(i.hG),e.rXU(i.IE),e.rXU(d.Ix))}}static{this.\u0275cmp=e.VBU({type:g,selectors:[["app-login"]],viewQuery:function(s,o){if(1&s&&e.GBs(C,7),2&s){let t;e.mGM(t=e.lsd())&&(o.form=t.first)}},decls:25,vars:7,consts:[["loginForm","ngForm"],[1,"ion-padding"],[1,"tai-form",3,"ngSubmit"],[1,"ion-justify-content-center"],["sizeLg","5","sizeMd","6","sizeXl","4",1,"ion-align-self-center"],["alt","Logo","src","assets/logo.png"],["lines","none",1,"tai-input"],["name","usuario","placeholder","Usuario","type","text",1,"login",3,"ngModelChange","ngModel"],["name","password","placeholder","Contrase\xf1a","required","",1,"login",3,"keyup.enter","ngModelChange","ngModel","type"],["slot","end",1,"login",3,"click","name"],["lines","none"],["color","success","name","rememberMe","slot","end",3,"ngModelChange","ngModel"],["color","success","expand","block","type","submit",1,"ion-no-margin",3,"disabled"],["lines","none","mode","md","routerLink","/password/new",1,"ion-text-center"],["color","success"],["lines","none","mode","md",1,"ion-text-center"]],template:function(s,o){if(1&s){const t=e.RV6();e.j41(0,"ion-content",1)(1,"form",2,0),e.bIt("ngSubmit",function(){return e.eBV(t),e.Njj(o.login())}),e.j41(3,"ion-grid")(4,"ion-row",3)(5,"ion-col",4),e.nrm(6,"ion-img",5),e.j41(7,"ion-list")(8,"ion-item",6)(9,"ion-input",7),e.mxI("ngModelChange",function(a){return e.eBV(t),e.DH7(o.auth.usuario,a)||(o.auth.usuario=a),e.Njj(a)}),e.k0s()(),e.j41(10,"ion-item",6)(11,"ion-input",8),e.bIt("keyup.enter",function(){return e.eBV(t),e.Njj(o.login())}),e.mxI("ngModelChange",function(a){return e.eBV(t),e.DH7(o.auth.contrasenha,a)||(o.auth.contrasenha=a),e.Njj(a)}),e.k0s(),e.j41(12,"ion-icon",9),e.bIt("click",function(){return e.eBV(t),e.Njj(o.toggleType())}),e.k0s()(),e.j41(13,"ion-item",10)(14,"ion-label"),e.EFF(15,"Recordarme"),e.k0s(),e.j41(16,"ion-toggle",11),e.mxI("ngModelChange",function(a){return e.eBV(t),e.DH7(o.auth.rememberMe,a)||(o.auth.rememberMe=a),e.Njj(a)}),e.k0s()(),e.j41(17,"ion-button",12),e.EFF(18," Entrar "),e.k0s(),e.j41(19,"ion-item",13)(20,"ion-label",14),e.EFF(21,"Olvid\xe9 mi contrase\xf1a"),e.k0s()(),e.j41(22,"ion-item",15)(23,"ion-label",14),e.EFF(24),e.k0s()()()()()()()()}if(2&s){const t=e.sdS(2);e.R7$(9),e.R50("ngModel",o.auth.usuario),e.R7$(2),e.R50("ngModel",o.auth.contrasenha),e.Y8G("type",o.passwordType),e.R7$(),e.FS9("name","text"===o.passwordType?"eye":"eye-off"),e.R7$(4),e.R50("ngModel",o.auth.rememberMe),e.R7$(),e.Y8G("disabled",t.invalid),e.R7$(7),e.SpI("Versi\xf3n:",o.version,"")}},dependencies:[u.qT,u.BC,u.cb,u.YS,u.vS,u.cV,i.Jm,i.hU,i.W9,i.lO,i.iq,i.KW,i.$w,i.uz,i.he,i.nf,i.ln,i.BY,i.hB,i.Gw,i.N7,d.Wk],styles:[".tai-input[_ngcontent-%COMP%]{font-size:20px;height:45px}.login[_ngcontent-%COMP%]{font-size:18px;margin-top:-25px;margin-left:8px;margin-bottom:2px;padding-top:-20px;padding-bottom:-40px}ion-img[_ngcontent-%COMP%]{padding-top:0;max-width:150px;max-height:150px;display:block;margin:0 auto}"]})}}return g})();var L=r(9244);const T=[{path:"",component:F}];let b=(()=>{class g{static{this.\u0275fac=function(s){return new(s||g)}}static{this.\u0275mod=e.$C({type:g})}static{this.\u0275inj=e.G2t({imports:[h.MD,u.YN,i.bv,d.iI.forChild(T),L.Q]})}}return g})()}}]);